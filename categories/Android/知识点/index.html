<!DOCTYPE html>
<html>

<head><meta name="generator" content="Hexo 3.9.0">
  
  <title>分类：知识点 - 网记本</title>
  <meta charset="UTF-8">
  <meta name="description" content>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  

  <link rel="shortcut icon" href="/img/favicon.png" type="image/png">
  <meta property="og:type" content="website">
<meta property="og:title" content="网记本">
<meta property="og:url" content="https://freefuncode.github.io/categories/Android/知识点/index.html">
<meta property="og:site_name" content="网记本">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="网记本">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdui@0.4.3/dist/css/mdui.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.15.8/styles/atom-one-dark.css">
   
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">
  
  
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1038733_0xvrvpg9c0r.css">
  <link rel="stylesheet" href="/css/style.css?v=1571545567623">
</head>

<body class="mdui-drawer-body-left">
  
  <div id="nexmoe-background">
    <div class="nexmoe-bg" style="background-image: url(https://i.loli.net/2019/01/13/5c3aec85a4343.jpg)"></div>
    <div class="mdui-appbar mdui-shadow-0">
      <div class="mdui-toolbar">
        <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">menu</i></a>
        <div class="mdui-toolbar-spacer"></div>
        <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
        <a href="/" title="网记本" class="mdui-btn mdui-btn-icon"><img src="/img/avatar.jpg"></a>
       </div>
    </div>
  </div>
  <div id="nexmoe-header">
      <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="网记本">
            <img src="/img/avatar.jpg" alt="网记本">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>文章</span>94</div>
        <div><span>标签</span>51</div>
        <div><span>分类</span>13</div>
    </div>
    <ul class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/" title="回到首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                回到首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/about" title="关于博客">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                关于博客
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/PY.html" title="我的收藏">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                我的收藏
            </div>
        </a>
        
    </ul>
    <aside id="nexmoe-sidebar">
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">社交按钮</h3>
    <div class="nexmoe-widget nexmoe-social">
        <a class="mdui-ripple" href="https://weibo.com/230689567" target="_blank" mdui-tooltip="{content: '微博'}" style="color: rgb(231, 106, 141);background-color: rgba(231, 106, 141, .15);">
            <i class="nexmoefont icon-weibo"></i>
        </a><a class="mdui-ripple" href="https://juejin.im/user/5ceb7d54f265da1b8466c2f5/posts" target="_blank" mdui-tooltip="{content: '掘金'}" style="color: rgb(231, 106, 141);background-color: rgba(231, 106, 141, .15);">
            <i class="nexmoefont icon-appstore-fill"></i>
        </a><a class="mdui-ripple" href="https://www.cnblogs.com/bugzone/" target="_blank" mdui-tooltip="{content: '博客园'}" style="color: rgb(231, 106, 141);background-color: rgba(231, 106, 141, .15);">
            <i class="nexmoefont icon-dribbble"></i>
        </a><a class="mdui-ripple" href="https://www.jianshu.com/u/ba21180e6aab" target="_blank" mdui-tooltip="{content: '简书'}" style="color: rgb(231, 106, 141);background-color: rgba(231, 106, 141, .15);">
            <i class="nexmoefont icon-container"></i>
        </a><a class="mdui-ripple" href="https://github.com/freefuncode/" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color: rgb(25, 23, 23);background-color: rgba(25, 23, 23, .15);">
            <i class="nexmoefont icon-github"></i>
        </a><a class="mdui-ripple" href="https://www.zhihu.com/people/yimei-cheng-xu-yuan-28/activities" target="_blank" mdui-tooltip="{content: '知乎'}" style="color: rgb(25, 23, 23);background-color: rgba(25, 23, 23, .15);">
            <i class="nexmoefont icon-zhihu"></i>
        </a>
    </div>
</div>
  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">文章分类</h3>
    <div class="nexmoe-widget">

      <ul class="category-list">

        


        

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Android/">Android</a>
          <span class="category-list-count">52</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/后端/CSharp/">CSharp</a>
          <span class="category-list-count">14</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/GitHub/">GitHub</a>
          <span class="category-list-count">5</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/后端/JAVA/">JAVA</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/后端/PHP/">PHP</a>
          <span class="category-list-count">6</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Android/kotlin/">kotlin</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/前端/">前端</a>
          <span class="category-list-count">5</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/后端/">后端</a>
          <span class="category-list-count">21</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Android/安卓源码/">安卓源码</a>
          <span class="category-list-count">15</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Android/开源框架/">开源框架</a>
          <span class="category-list-count">17</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/心情/">心情</a>
          <span class="category-list-count">10</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Android/知识点/">知识点</a>
          <span class="category-list-count">18</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/设计模式/">设计模式</a>
          <span class="category-list-count">1</span>
        </li>

        
      </ul>

    </div>
  </div>


  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">标签云</h3>
    <div id="randomtagcloud" class="nexmoe-widget tagcloud">
      <a href="/tags/AIDL/" style="font-size: 10px;">AIDL</a> <a href="/tags/Activity/" style="font-size: 10px;">Activity</a> <a href="/tags/Android/" style="font-size: 12.5px;">Android</a> <a href="/tags/Android7-0/" style="font-size: 10px;">Android7.0</a> <a href="/tags/BroadcastReceiver/" style="font-size: 10px;">BroadcastReceiver</a> <a href="/tags/C-文件上传/" style="font-size: 10px;">C#文件上传</a> <a href="/tags/ContentProvider/" style="font-size: 10px;">ContentProvider</a> <a href="/tags/Excel操作/" style="font-size: 10px;">Excel操作</a> <a href="/tags/GitHub/" style="font-size: 10px;">GitHub</a> <a href="/tags/IIS/" style="font-size: 12.5px;">IIS</a> <a href="/tags/LNMP/" style="font-size: 10px;">LNMP</a> <a href="/tags/Linq/" style="font-size: 10px;">Linq</a> <a href="/tags/MAMP/" style="font-size: 10px;">MAMP</a> <a href="/tags/Service/" style="font-size: 10px;">Service</a> <a href="/tags/SqlServer/" style="font-size: 10px;">SqlServer</a> <a href="/tags/ViewPager/" style="font-size: 10px;">ViewPager</a> <a href="/tags/XMLHttpRequest/" style="font-size: 10px;">XMLHttpRequest</a> <a href="/tags/c/" style="font-size: 10px;">c#</a> <a href="/tags/coroutine协程/" style="font-size: 10px;">coroutine协程</a> <a href="/tags/easyui/" style="font-size: 12.5px;">easyui</a> <a href="/tags/fiddler/" style="font-size: 10px;">fiddler</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/kotlin/" style="font-size: 10px;">kotlin</a> <a href="/tags/mongodb/" style="font-size: 10px;">mongodb</a> <a href="/tags/mono-for-Android/" style="font-size: 10px;">mono_for_Android</a> <a href="/tags/nodejs/" style="font-size: 10px;">nodejs</a> <a href="/tags/php/" style="font-size: 10px;">php</a> <a href="/tags/view绘制/" style="font-size: 10px;">view绘制</a> <a href="/tags/visualStudio/" style="font-size: 12.5px;">visualStudio</a> <a href="/tags/习惯/" style="font-size: 10px;">习惯</a> <a href="/tags/京东云擎/" style="font-size: 10px;">京东云擎</a> <a href="/tags/公众号/" style="font-size: 10px;">公众号</a> <a href="/tags/副业/" style="font-size: 10px;">副业</a> <a href="/tags/图片保存/" style="font-size: 10px;">图片保存</a> <a href="/tags/地图/" style="font-size: 12.5px;">地图</a> <a href="/tags/增量更新/" style="font-size: 10px;">增量更新</a> <a href="/tags/安卓源码/" style="font-size: 17.5px;">安卓源码</a> <a href="/tags/屏幕适配/" style="font-size: 10px;">屏幕适配</a> <a href="/tags/序列化/" style="font-size: 10px;">序列化</a> <a href="/tags/开源框架/" style="font-size: 20px;">开源框架</a> <a href="/tags/新浪SAE/" style="font-size: 10px;">新浪SAE</a> <a href="/tags/日期格式化/" style="font-size: 10px;">日期格式化</a> <a href="/tags/正则表达式/" style="font-size: 10px;">正则表达式</a> <a href="/tags/电影/" style="font-size: 15px;">电影</a> <a href="/tags/线程切换/" style="font-size: 10px;">线程切换</a> <a href="/tags/职业发展/" style="font-size: 10px;">职业发展</a> <a href="/tags/职业生涯/" style="font-size: 10px;">职业生涯</a> <a href="/tags/设计模式/" style="font-size: 10px;">设计模式</a> <a href="/tags/评论插件/" style="font-size: 10px;">评论插件</a> <a href="/tags/跳槽/" style="font-size: 12.5px;">跳槽</a> <a href="/tags/面试/" style="font-size: 12.5px;">面试</a>
    </div>
    
  </div>

  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">文章归档</h3>
    <div class="nexmoe-widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">六月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">四月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">十二月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">十一月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">九月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">八月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">七月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">五月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">四月 2014</a></li></ul>
    </div>
  </div>


  
</aside>
    <div class="nexmoe-copyright">
        &copy; 2019 网记本
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://nexmoe.com/hexo-theme-nexmoe.html" target="_blank">Nexmoe</a>
    </div>
</div><!-- .nexmoe-drawer -->
  </div>
  <div id="nexmoe-content">
    <div class="nexmoe-primary">
        <section class="nexmoe-posts" id="brand-waterfall">
    
    <div class="nexmoe-post">
        <a href="/2019/10/19/Android子线程切换到UI线程方法总结/">
            <div class="nexmoe-post-cover mdui-ripple"> 
                
                    <img src="https://i.loli.net/2019/01/13/5c3aec85a4343.jpg" alt="Android子线程切换到UI线程方法总结">
                
                <h1>Android子线程切换到UI线程方法总结</h1>
            </div>
        </a>
        <div class="nexmoe-post-meta">
            <a><i class="nexmoefont icon-calendar-fill"></i>2019年10月19日</a>
            <a><i class="nexmoefont icon-areachart"></i>1k 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 5 分钟</a>
            
                <a class="nexmoefont icon-appstore-fill -link" href="/categories/Android/">Android</a><a class="nexmoefont icon-appstore-fill -link" href="/categories/Android/知识点/">知识点</a>
            
            
                <a class="nexmoefont icon-tag-fill -link" href="/tags/线程切换/">线程切换</a>
            
        </div>
        <article>
            
            <h4 id="线程切换"><a href="#线程切换" class="headerlink" title="线程切换"></a>线程切换</h4><blockquote>
<p>通过消息发送（发布）和接收（订阅）的方式切换的。</p>
</blockquote>
<h5 id="1-Handler"><a href="#1-Handler" class="headerlink" title="1 .Handler"></a>1 .Handler</h5><blockquote>
<p>子线程（非UI线程）调用handler对象sendMessage（msg）方法，将消息发送给关联Looper，Looper将消息存储在MessageQueue消息队列里面。</p>
<p>然后轮巡取出MessageQueue中的消息给UI线程中handler处理，handler得到消息调用handleMessage方法处理消息，从而可以更新Ui。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"> private Handler handler2=new Handler()&#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void handleMessage(Message msg) &#123;</span><br><span class="line">                switch (msg.what)&#123;</span><br><span class="line">                    case 1:</span><br><span class="line">	                    //UI线程</span><br><span class="line">                        textView.setText(msg.obj.toString());</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">//开启线程执行耗时操作</span><br><span class="line">new Thread()&#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void run() &#123;</span><br><span class="line">	            //执行相关耗时操作等等...</span><br><span class="line">	            //休眠3s</span><br><span class="line">	            sleep(3000);</span><br><span class="line">                Message message = new Message();</span><br><span class="line">                //区分标志</span><br><span class="line">                message.what=1;</span><br><span class="line">                //传参到ui线程</span><br><span class="line">                message.obj=123123;</span><br><span class="line">                handler2.sendMessage(message);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.start();</span><br></pre></td></tr></table></figure>

<p>** 扩展注意：**</p>
<ul>
<li>1 . Handler机制与Activity生命周期不一致的原因，容易导致内存泄漏。</li>
<li>2 . 实例化 handler<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//实例化handler在其他线程的时候要下面这样写（UI线程内部已经实现，无需写）</span><br><span class="line"> private Handler handler = new Handler(Looper.getMainLooper());</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h5 id="2-Activity-runOnUiThread"><a href="#2-Activity-runOnUiThread" class="headerlink" title="2. Activity.runOnUiThread"></a>2. Activity.runOnUiThread</h5><blockquote>
<p>用Activity对象的runOnUiThread方法更新，在子线程中通过runOnUiThread()方法更新UI </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">new Thread() &#123;</span><br><span class="line">        public void run() &#123;</span><br><span class="line">            while (i++ &lt; 1000) &#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    runOnUiThread(new Runnable() &#123;</span><br><span class="line">                        @Override</span><br><span class="line">                        public void run() &#123;</span><br><span class="line">                            textView.setText(&quot;#&quot; + i);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                    Thread.sleep(300);</span><br><span class="line">                &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;.start();</span><br></pre></td></tr></table></figure>

<h5 id="3-View-post-Runnable-r"><a href="#3-View-post-Runnable-r" class="headerlink" title="3. View.post(Runnable r)"></a>3. View.post(Runnable r)</h5><blockquote>
<p>View.post(Runnableaction)，View获得当前线程（即UI线程）的Handler，然后将action对象post到Handler里。</p>
<p>在Handler里，它将传递过来的action对象包装成一个Message（Message的callback为action），然后将其投入UI线程的消息循环中。</p>
<p>在Handler再次处理该Message时，直接调用runnable的run方法。而此时，已经路由到UI线程里，因此，我们可以毫无顾虑的来更新UI。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">new Thread()&#123;</span><br><span class="line">           @Override</span><br><span class="line">           public void run() &#123;</span><br><span class="line">               super.run();</span><br><span class="line">               for (int i=0;i&lt;3;i++)&#123;</span><br><span class="line">                   try &#123;</span><br><span class="line">                       sleep(1000);</span><br><span class="line">                   &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                       e.printStackTrace();</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line">               tv.post(new Runnable() &#123;</span><br><span class="line">                   @Override</span><br><span class="line">                   public void run() &#123;</span><br><span class="line">                       tv.setText(&quot;通过View.post(Runnable r) 方法&quot;);</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;.run();</span><br></pre></td></tr></table></figure>

<p><strong>扩展注意：</strong></p>
<p>子线程能不能更新UI，答案是<strong>肯定</strong>的。具体阅读下这篇文章：<a href="https://juejin.im/post/5da14e8ae51d45782b0c1c20" target="_blank" rel="noopener">Android 子线程更新UI？</a></p>
<p>上面就是为了实现用一个Thread来更新tv，可以实现这个功能，刷新UI界面。但是这样是不对的，因为它违背了单线程模型：Android UI操作并不是线程安全的并且这些操作必须在UI线程中执行。</p>
<h5 id="4-AsyncTask"><a href="#4-AsyncTask" class="headerlink" title="4. AsyncTask"></a>4. AsyncTask</h5><blockquote>
<p>内部就是一个Handler和线程池的封装。在线程池中执行后台任务，并在执行过程中将执行进度传递给主线程，当任务执行完毕后，将最终结果传递给主线程。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">private class MyAsyncTask extends AsyncTask&#123;</span><br><span class="line">		//第一阶段————准备阶段</span><br><span class="line">          @Override</span><br><span class="line">          protected void onPreExecute() &#123;</span><br><span class="line">              super.onPreExecute();</span><br><span class="line">          &#125; 	</span><br><span class="line">        //第二阶段————耗时操作</span><br><span class="line">        @Override</span><br><span class="line">        protected Object doInBackground(Object[] objects) &#123;</span><br><span class="line">            for (int i=0;i&lt;3;i++)&#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    sleep(1000);</span><br><span class="line">                &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            return objects[0].toString();</span><br><span class="line">        &#125;</span><br><span class="line">       //第三阶段———— 更新UI</span><br><span class="line">        @Override</span><br><span class="line">        protected void onPostExecute(Object o) &#123;</span><br><span class="line">            super.onPostExecute(o);</span><br><span class="line">            tv.setText(o.toString());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h5 id="5-Rxjava"><a href="#5-Rxjava" class="headerlink" title="5. Rxjava"></a>5. Rxjava</h5><blockquote>
<p>RXJAVA的实现，是一种扩展式的观察者模式。</p>
<p>RXJAVA中有四种概念。observable（被观察者），observer（观察者），subscribe（订阅），事件。</p>
<p>Observable和Observer通过subscribe来实现订阅关系。</p>
<p>与传统的观察者模式不同，除了onNext事件外，rxjava还提供了onCompleted和onError。当不再有onNext事件发送时，将以onCompleted事件作为结束。当处理过程中出现异常时，会触发onError，同时队列自动终止，不允许再有事件发出。onCompleted和onError在一个序列中有且只有一个，二者互斥，只能出现一个。</p>
</blockquote>
<p>源码来自：<a href="https://www.jianshu.com/p/9d4e39a83a74" target="_blank" rel="noopener">RxJava线程切换代替Thread和Handler</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"> public static &lt;T&gt; void doTask(final Task&lt;T&gt; task) &#123;</span><br><span class="line">        //创建被观察者 Observable，它决定什么时候触发事件以及触发怎样的事件。</span><br><span class="line">        Observable.create(new Observable.OnSubscribe&lt;T&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void call(Subscriber&lt;? super T&gt; subscriber) &#123;</span><br><span class="line">                // 线程执行耗时操作</span><br><span class="line">//                task.doOnIOThread();</span><br><span class="line">//                subscriber.onNext(task.getT());</span><br><span class="line">                subscriber.onCompleted();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">                .subscribeOn(Schedulers.io())</span><br><span class="line">                .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line">                //订阅</span><br><span class="line">                .subscribe(new Action1&lt;T&gt;() &#123;</span><br><span class="line">                    @Override</span><br><span class="line">                    public void call(T t) &#123;</span><br><span class="line">                        //主线程更新UI</span><br><span class="line">//                        task.doOnUIThread();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;, new Action1&lt;Throwable&gt;() &#123;</span><br><span class="line">                    @Override</span><br><span class="line">                    public void call(Throwable throwable) &#123;</span><br><span class="line">                        throwable.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2019/10/07/bsdiff和bspatch增量更新概念介绍/">
            <div class="nexmoe-post-cover mdui-ripple"> 
                
                    <img src="https://i.loli.net/2019/01/13/5c3aec85a4343.jpg" alt="bsdiff&amp;bspatch增量更新概念介绍">
                
                <h1>bsdiff&amp;bspatch增量更新概念介绍</h1>
            </div>
        </a>
        <div class="nexmoe-post-meta">
            <a><i class="nexmoefont icon-calendar-fill"></i>2019年10月07日</a>
            <a><i class="nexmoefont icon-areachart"></i>859 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 3 分钟</a>
            
                <a class="nexmoefont icon-appstore-fill -link" href="/categories/Android/">Android</a><a class="nexmoefont icon-appstore-fill -link" href="/categories/Android/知识点/">知识点</a>
            
            
                <a class="nexmoefont icon-tag-fill -link" href="/tags/增量更新/">增量更新</a>
            
        </div>
        <article>
            
            <blockquote>
<p>随着Android生态，技术越来越成熟，目前市场很多Android的项目工程很大，团队人数多，慢慢衍生出了许多组件化插件化技术。<br>同时也因为Android安装包apk也在逐渐增大，每次发布，用户更新apk环境复杂，如果全量更新下载apk的话在使用流量情况下，网络环境不好等等，对于用户体验是非常不好的。</p>
</blockquote>
<h4 id="首先区分下几个概念"><a href="#首先区分下几个概念" class="headerlink" title="首先区分下几个概念"></a>首先区分下几个概念</h4><p><strong>组件化</strong> ： 把常用的模块代码,抽取lib工程或者jar达到复用的效果。<br><strong>插件化</strong>：目的是把需要实现的模块或功能当做一个独立的提取出来，减少宿主的规模，当需要使用到相应的功能时再去加载相应的模块。涉及动态代理，ClassLoader，以及另一个apk资源的加载。例如：360的DroidPlugin (推荐)<br><strong>热修复</strong>：往往是从修复bug的角度出发，强调的是在不需要二次安装应用的前提下修复已知的bug(涉及关键词：Hook技术、动态代理等)。例如：阿里 AndFix。<br><strong>增量更新</strong>：APK增量更新是很多大厂APP采用的技术。bsdiff库生成补丁文件方式下载跟旧版本APK合成生成新版APK的原理(ligbspatch.so)。手机游戏app增量更新使用较多。例如：<a href="https://github.com/cundong/SmartAppUpdates" target="_blank" rel="noopener">SmartAppUpdates</a></p>
<hr>
<p><img src="/images/bsdiff&bspatch.jpg" alt="bsdiff&amp;bspatch"></p>
<p><strong>bsdiff生成patch -&gt; bzip2压缩 -&gt; android下载patch -&gt; bzip2解压patch -&gt; bspatch合并patch -&gt; 新的apk</strong></p>
<blockquote>
<p>bsdiff并不是专门为apk增量更新设计的，它可以对任何二进制文件进行差分和合并。bzip2的功能是利用哈夫曼编码对文件进行无损压缩(将差分包进行压缩便于网络传输)和解压。</p>
</blockquote>
<p>流程：</p>
<ul>
<li>在服务器端，生成两个版本apk的差分包；</li>
<li>在手机客户端，使用已安装的apk与这个差分包进行合成，得到新版的apk；</li>
<li>校验新合成的apk文件是否完整，MD5或SHA1是否正确，如正确，则引导用户安装；</li>
</ul>
<hr>
<h4 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h4><p>bsdiff 生成patch包        命令：<code>bsdiff oldfile newfile patchfile</code>           例如: <code>bsdiff xx_v1.0.apk xx_v2.0.apk xx.patch</code></p>
<p>bspatch生成新的APK：    命令： <code>bspatch oldfile newfile patchfile</code>      例如: <code>bsdiff xx_v1.0.apk xx_v2.0.apk xx.patch</code></p>
<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><p><a href="https://blog.csdn.net/u012484172/article/details/54932717" target="_blank" rel="noopener">Android增量更新——bsdiff&amp;bspatch</a></p>
<h4 id="缺点："><a href="#缺点：" class="headerlink" title="缺点："></a>缺点：</h4><p>增量升级并非完美无缺的升级方式，至少存在以下两点不足：</p>
<ul>
<li><p>增量升级是以两个应用版本之间的差异来生成补丁的，你无法保证用户每次的及时升级到最新，所以你必须对你所发布的每一个版本都和最新的版本作差分，以便使所有版本的用户都可以差分升级，这样操作相对于原来的整包升级较为繁琐，不过可以通过自动化的脚本批量生成。</p>
</li>
<li><p>增量升级成功的前提是，用户手机端必须有能够让你拷贝出来且与你服务器用于差分的版本一致的apk，这样就存在，例如，系统内置的apk无法获取到，无法进行增量升级；对于某些与你差分版本一致，但是内容有过修改的(比如破解版apk)，这样也是无法进行增量升级的，为了防止合成补丁错误，最好通过md5 或者其他方式对patch包进行完整性的校验。</p>
</li>
</ul>

            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2019/10/03/AndroidView绘制流程/">
            <div class="nexmoe-post-cover mdui-ripple"> 
                
                    <img src="https://i.loli.net/2019/01/13/5c3aec85a4343.jpg" alt="Android View绘制流程">
                
                <h1>Android View绘制流程</h1>
            </div>
        </a>
        <div class="nexmoe-post-meta">
            <a><i class="nexmoefont icon-calendar-fill"></i>2019年10月03日</a>
            <a><i class="nexmoefont icon-areachart"></i>35 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 1 分钟</a>
            
                <a class="nexmoefont icon-appstore-fill -link" href="/categories/Android/">Android</a><a class="nexmoefont icon-appstore-fill -link" href="/categories/Android/知识点/">知识点</a>
            
            
                <a class="nexmoefont icon-tag-fill -link" href="/tags/view绘制/">view绘制</a>
            
        </div>
        <article>
            
            <h1 id="Android-View绘制流程"><a href="#Android-View绘制流程" class="headerlink" title="Android View绘制流程"></a>Android View绘制流程</h1><blockquote>
<p>Android绘制经历了三个步骤：</p>
<ul>
<li>1.Measure 测量View大小</li>
<li>2.layout 计算摆放位置</li>
<li>3.draw 画View</li>
</ul>
</blockquote>

            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2019/10/03/Android屏幕适配/">
            <div class="nexmoe-post-cover mdui-ripple"> 
                
                    <img src="https://i.loli.net/2019/01/13/5c3aec85a4343.jpg" alt="Android屏幕适配">
                
                <h1>Android屏幕适配</h1>
            </div>
        </a>
        <div class="nexmoe-post-meta">
            <a><i class="nexmoefont icon-calendar-fill"></i>2019年10月03日</a>
            <a><i class="nexmoefont icon-areachart"></i>1.6k 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 6 分钟</a>
            
                <a class="nexmoefont icon-appstore-fill -link" href="/categories/Android/">Android</a><a class="nexmoefont icon-appstore-fill -link" href="/categories/Android/知识点/">知识点</a>
            
            
                <a class="nexmoefont icon-tag-fill -link" href="/tags/屏幕适配/">屏幕适配</a>
            
        </div>
        <article>
            
            <h1 id="Android屏幕适配方案"><a href="#Android屏幕适配方案" class="headerlink" title="Android屏幕适配方案"></a>Android屏幕适配方案</h1><blockquote>
<p>先讲述一些屏幕适配相关概念，然后介绍下3种主要的适配方案以及优缺点。</p>
</blockquote>
<h3 id="一-基本概念"><a href="#一-基本概念" class="headerlink" title="一.基本概念"></a>一.基本概念</h3><h4 id="1-像素（px）"><a href="#1-像素（px）" class="headerlink" title="1. 像素（px）"></a>1. 像素（px）</h4><ul>
<li>像素是手机屏幕的最小构成单元。<h4 id="2-分辨率-（px）"><a href="#2-分辨率-（px）" class="headerlink" title="2. 分辨率 （px）"></a>2. 分辨率 （px）</h4></li>
<li>手机在横向、纵向上的像素点数总和，一般描述成 宽高 ，即横向像素点个数纵向像素点个数。</li>
<li>例如：1080x1920，即宽度方向上有1080个像素点，在高度方向上有1920个像素点。<h4 id="3-屏幕尺寸（inch）"><a href="#3-屏幕尺寸（inch）" class="headerlink" title="3.屏幕尺寸（inch）"></a>3.屏幕尺寸（inch）</h4></li>
<li>手机对角线的物理尺寸，单位 英寸（inch），一英寸大约2.54cm，</li>
<li>例如：常见的尺寸有4.7寸、5寸、5.5寸、6寸<h4 id="4-屏幕像素密度-dpi"><a href="#4-屏幕像素密度-dpi" class="headerlink" title="4.屏幕像素密度 (dpi)"></a>4.屏幕像素密度 (dpi)</h4></li>
<li>每英寸长度上像素点个数。”dot per inch”:</li>
<li>例如每英寸内有160个像素点，则其像素密度为160dpi。<h5 id="以上四者之间关系"><a href="#以上四者之间关系" class="headerlink" title="以上四者之间关系"></a>以上四者之间关系</h5></li>
<li>$ √(（宽px）²+（高px）²)  /  (屏幕尺寸inch) = (屏幕像素密度dpi) $ <h4 id="5-dp，dip，sp"><a href="#5-dp，dip，sp" class="headerlink" title="5. dp，dip，sp"></a>5. dp，dip，sp</h4></li>
<li>dip和dp是一个意思，都是Density Independent Pixels的缩写，即密度无关像素。</li>
<li>例如：在Android中，规定以160dpi为基准，1dip=1px，如果密度是320dpi，则1dip=2px，以此类推。</li>
<li>android中的dp在渲染前会将dp转为px，计算公式：<br>$px = density * dp;$<br>$density = dpi / 160;$<br>$px = dp * (dpi / 160);$</li>
<li>注意：dp与px不一定都是2倍的关系，与屏幕像素密度dpi有关。<h4 id="6-hdpi，mdpi，xhdpi，xxhdpi，xxxhdpi"><a href="#6-hdpi，mdpi，xhdpi，xxhdpi，xxxhdpi" class="headerlink" title="6. hdpi，mdpi，xhdpi，xxhdpi，xxxhdpi"></a>6. hdpi，mdpi，xhdpi，xxhdpi，xxxhdpi</h4></li>
<li>用来修饰Android中的drawable文件夹及values文件夹，用来区分不同像素密度下的图片和dimen值。</li>
<li>在设计图标时，对于五种主流的像素密度（mdpi、hdpi、xhdpi、xxhdpi 和 xxxhdpi）应按照 2:3:4:6:8 的比例进行缩放。</li>
</ul>
<hr>
<h3 id="2-适配方案"><a href="#2-适配方案" class="headerlink" title="2.适配方案"></a>2.适配方案</h3><blockquote>
<p>主要介绍一些适配方案，至于布局编码注意的问题，不详细介绍了。</p>
<ul>
<li>使用 “wrap_content” 和 “match_parent” 尺寸值而不是硬编码的尺寸，视图就会相应地仅使用自身所需的空间或展开以填满可用空间。</li>
<li>weight是线性布局的一个独特的属性，我们可以使用这个属性来按照比例对界面进行分配。</li>
<li>使用相对布局，禁用绝对布局。等等…</li>
</ul>
<p>适配目的是使得某一元素在Android不同尺寸、不同分辨率的手机上具备相同的显示效果。</p>
</blockquote>
<h4 id="1-屏幕分辨率限定符（宽高限定符）"><a href="#1-屏幕分辨率限定符（宽高限定符）" class="headerlink" title="1.屏幕分辨率限定符（宽高限定符）"></a>1.屏幕分辨率限定符（宽高限定符）</h4><blockquote>
<p>设定一个基准的分辨率，也就是设计图对应的分辨率，其他分辨率都根据这个基准分辨率来计算，在不同的尺寸文件夹内部，根据该尺寸编写对应的dimens文件。</p>
</blockquote>
<ul>
<li>屏幕分辨率限定符适配需要在 res 文件夹下创建各种屏幕分辨率对应的 values-xxx 文件夹。</li>
<li>然后根据一个基准分辨率，例如基准分辨率为 1280x720，将宽度分成 720 份，取值为 1px~720px，将高度分成 1280 份，取值为1px—1280px，生成各种分辨率对应的 dimens.xml 文件。<blockquote>
<p>基准分辨率 1280x720 对应的dimes文件:</p>
<ul>
<li>宽度为720，将任何分辨率的宽度整分为720份，取值为x1-x720</li>
<li>高度为1280，将任何分辨率的高度整分为1280份，取值为y1-y1280</li>
</ul>
<p>那么对于1080*1920的分辨率的dimens文件来说,宽度如下:</p>
<ul>
<li>x1=(1080/720)*1=1.5px </li>
<li>x2=(1080/720)*2=3px<br>…</li>
<li>x719=(1080/720)*719=1078.5px</li>
<li>x720=(1080/720)*720=1080px</li>
</ul>
</blockquote>
</li>
</ul>
<p>如下分别为分辨率 1280x720 与 1920x1080 所对应的横向dimens.xml 文件：<br><img src="/images/dimens_01.jpg" alt="分辨率 1280x720 与 1920x1080 所对应的横向dimens"></p>
<ul>
<li>缺点<br>这个方案有一个致命的缺陷，那就是需要精准命中才能适配，比如1920x1080的手机就一定要找到1920x1080的限定符，否则就只能用统一的默认的dimens文件了。而使用默认的尺寸的话，UI就很可能变形，简单说，就是容错机制很差。</li>
</ul>
<h4 id="2-smallestWidth-限定符"><a href="#2-smallestWidth-限定符" class="headerlink" title="2. smallestWidth 限定符"></a>2. smallestWidth 限定符</h4><blockquote>
<p>smallestWidth适配，或者叫sw限定符适配。指的是Android会识别屏幕可用高度和宽度的最小尺寸的dp值（其实就是手机的宽度值），然后根据识别到的结果去资源文件中寻找对应限定符的文件夹下的资源文件。<br><strong>smallestWidth 限定符 和宽高限定符适配原理上是一样的，都是系统通过特定的规则来选择对应的文件。</strong></p>
</blockquote>
<ul>
<li>smallestWidth 限定符屏幕适配方案 只是把 dimens.xml 文件中的值从 px 换成了 dp，原理和使用方式都是没变的。</li>
</ul>
<p><img src="/images/dimens_02.jpg" alt="最小宽度为 360dp 与最小宽度为 640dp 所对应的 dimens"></p>
<ul>
<li><p>插件ScreenMatch自动生成dimes文件<br><a href="https://www.jianshu.com/p/1302ad5a4b04" target="_blank" rel="noopener">一种非常好用的Android屏幕适配</a></p>
</li>
<li><p>优点：</p>
<blockquote>
<ul>
<li>smallestWidth 限定符比屏幕分辨率限定符需要少量 dimens.xml 文件</li>
<li>smallestWidth 限定符适配采用的单位是 dp 和 sp。屏幕分辨率限定符采用px。</li>
<li>屏幕分辨率限定符需要精准命中才能适配，而 smallestWidth 限定符适配寻找 dimens.xml 文件的原理是从大往小找，即使没有完全匹配也能达到不错的适配效果。</li>
</ul>
</blockquote>
</li>
<li><p>缺点：</p>
<blockquote>
<ul>
<li>侵入性高，在所有地方都需要引用。</li>
<li>还是没有办法覆盖所有的机型分辨率，部分机型可能适配效果还是不佳。</li>
<li>不能以高度为基准进行适配。</li>
<li>生成很多文件，增大APP体积1~2M。</li>
</ul>
</blockquote>
</li>
</ul>
<h4 id="3-今日头条适配方案"><a href="#3-今日头条适配方案" class="headerlink" title="3. 今日头条适配方案"></a>3. 今日头条适配方案</h4><blockquote>
<p>今日头条屏幕适配方案的核心原理在于，动态计算density，通过系统api，将density赋值给系统，抛弃掉系统默认计算density的计算公式。<br>公式: $density = 屏幕宽度px / 设计图宽度（375dp）$</p>
</blockquote>
<ul>
<li><p>如何使用<br><a href="https://blog.csdn.net/wang_yong_hui_1234/article/details/82113714" target="_blank" rel="noopener">今日头条屏幕适配方案</a></p>
</li>
<li><p>优点</p>
<blockquote>
<ul>
<li>使用成本非常低，操作非常简单</li>
<li>侵入性非常低</li>
<li>可适配三方库的控件和系统的控件</li>
</ul>
</blockquote>
</li>
<li><p>缺点</p>
<blockquote>
<ul>
<li>会全局影响APP的控件大小，例如一些第三方库控件，他们设计的时候可能设计图尺寸并不是像我们一样是375dp，这样就会导致控件大小变形等一些问题。<br>当某个系统控件或三方库控件的设计图尺寸和和我们项目自身的设计图尺寸差距非常大时，这个问题就越严重。</li>
</ul>
</blockquote>
</li>
</ul>
<hr>
<p>参考：<a href="https://cloud.tencent.com/developer/article/1426238" target="_blank" rel="noopener">Android屏幕适配方案分析</a></p>

            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2019/08/25/Android面试题/">
            <div class="nexmoe-post-cover mdui-ripple"> 
                
                    <img src="https://i.loli.net/2019/01/13/5c3aec85a4343.jpg" alt="Android面试题">
                
                <h1>Android面试题</h1>
            </div>
        </a>
        <div class="nexmoe-post-meta">
            <a><i class="nexmoefont icon-calendar-fill"></i>2019年08月25日</a>
            <a><i class="nexmoefont icon-areachart"></i>1.1k 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 5 分钟</a>
            
                <a class="nexmoefont icon-appstore-fill -link" href="/categories/Android/">Android</a><a class="nexmoefont icon-appstore-fill -link" href="/categories/Android/知识点/">知识点</a>
            
            
                <a class="nexmoefont icon-tag-fill -link" href="/tags/面试/">面试</a>
            
        </div>
        <article>
            
            <p><a href="https://juejin.im/post/5d6289bcf265da03e83b783c" target="_blank" rel="noopener">点击查看原文</a></p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; 个人列出的一些目前常见的面试题，答案都是比较简单的说了几个关键字，具体的还是自己针对每题去查，去了解，去求证。如果有问题，还请及时指出！</p>
<h2 id="1-五大布局"><a href="#1-五大布局" class="headerlink" title="1.五大布局"></a>1.五大布局</h2><p>LinearLayout，ReativeLayout，AbsoluteLayout, FrameLayout, TableLayout</p>
<h2 id="2-Activity生命周期"><a href="#2-Activity生命周期" class="headerlink" title="2.Activity生命周期"></a>2.Activity生命周期</h2><p>onCreate-&gt;onRestart-&gt;onStart-&gt;onResume-&gt;onPause-&gt;onStop-&gt;onDestory</p>
<h2 id="3-Fragment生命周期"><a href="#3-Fragment生命周期" class="headerlink" title="3.Fragment生命周期"></a>3.Fragment生命周期</h2><p>onAttch-&gt;onCreate-&gt;onCreateView-&gt;onActivityCreate-&gt;onStart-&gt;onResume-&gt;onPause-onStop-&gt;onDestoryView-&gt;onDestory-&gt;onDetach</p>
<p><a href="https://link.juejin.im?target=https%3A%2F%2Fwww.cnblogs.com%2Ffajieyefu%2Fp%2F6092465.html" target="_blank" rel="noopener">www.cnblogs.com/fajieyefu/p…</a></p>
<h2 id="4-view事件传递"><a href="#4-view事件传递" class="headerlink" title="4.view事件传递"></a>4.view事件传递</h2><p>dispatchTouchEvent, onIntecepterEvent, onTouchEvent</p>
<h2 id="5-Handler通信原理"><a href="#5-Handler通信原理" class="headerlink" title="5.Handler通信原理"></a>5.Handler通信原理</h2><p>Handler, Looper, MessageQueue, Message</p>
<h2 id="6-APK打包流程"><a href="#6-APK打包流程" class="headerlink" title="6.APK打包流程"></a>6.APK打包流程</h2><p>aapt-&gt;aidl-&gt;javac-&gt;dx-&gt;apkBuilder-&gt;javaSigner-&gt;zipAlign</p>
<h2 id="7-四大组件"><a href="#7-四大组件" class="headerlink" title="7.四大组件"></a>7.四大组件</h2><p>Activity, Service，BroadcastReceiver, ContentProvider</p>
<h2 id="8-Service启动方式及生命周期"><a href="#8-Service启动方式及生命周期" class="headerlink" title="8.Service启动方式及生命周期"></a>8.Service启动方式及生命周期</h2><p>startService,BindService</p>
<p>startService: onCreate-&gt;onStartCommand-&gt;onStop-&gt;onDestory</p>
<p>bindService: onCreate-&gt;onBind-&gt;onUnbind-&gt;onDestory</p>
<h2 id="9-进程的优先级"><a href="#9-进程的优先级" class="headerlink" title="9.进程的优先级"></a>9.进程的优先级</h2><p>前台进程，可见进程，服务进程，后台进程，空进程</p>
<h2 id="10-GC回收对象的优先级"><a href="#10-GC回收对象的优先级" class="headerlink" title="10.GC回收对象的优先级"></a>10.GC回收对象的优先级</h2><p>强引用，软引用，弱引用，虚引用，空引用</p>
<h2 id="11-GC回收对象的生命周期"><a href="#11-GC回收对象的生命周期" class="headerlink" title="11.GC回收对象的生命周期"></a>11.GC回收对象的生命周期</h2><p>新生期，老年期，永生期</p>
<h2 id="12-Activity四种LuncherMode"><a href="#12-Activity四种LuncherMode" class="headerlink" title="12.Activity四种LuncherMode"></a>12.Activity四种LuncherMode</h2><p>standard，singleTop，singleTask，singleInstance</p>
<h2 id="13-hashMap-hashTable-LinkedHashMap-treeMap区别"><a href="#13-hashMap-hashTable-LinkedHashMap-treeMap区别" class="headerlink" title="13.hashMap,hashTable,LinkedHashMap,treeMap区别"></a>13.hashMap,hashTable,LinkedHashMap,treeMap区别</h2><p>hashMap: 非线程安全，写入快，允许key-value为null</p>
<p>hashTable: 线程安全，写入慢，不允许key-value为null,</p>
<p>LinkedHashMap: 遍历速度与数据有关和容量无关，hashMap遍历与容量有关，输出的顺序和输入的相同（队列：先进后出），LRUcache内部实现原理。</p>
<p>treeMap:&nbsp;按自然顺序或自定义顺序遍历键优先使用</p>
<h2 id="14-LRUcache"><a href="#14-LRUcache" class="headerlink" title="14.LRUcache"></a>14.LRUcache</h2><p>LinkedHashMap</p>
<h2 id="15-APP冷启动过程"><a href="#15-APP冷启动过程" class="headerlink" title="15.APP冷启动过程"></a>15.APP冷启动过程</h2><p>zygote-&gt;Launcher-&gt;ActivityManagerService-&gt;Application-&gt;mainActivity(Activity创建)-&gt;onCreate-&gt;onStart-&gt;onResume-&gt;(view绘制)onMeassure-&gt;onLayout-&gt;onDraw</p>
<h2 id="16-进程间通信"><a href="#16-进程间通信" class="headerlink" title="16.进程间通信"></a>16.进程间通信</h2><p>Activity，Service, BroadCastReceiver, ContentProvider, Binder</p>
<h2 id="17-线程间通信"><a href="#17-线程间通信" class="headerlink" title="17.线程间通信"></a>17.线程间通信</h2><p>AnsyTask , Handler</p>
<h2 id="18-三种动画"><a href="#18-三种动画" class="headerlink" title="18.三种动画"></a>18.三种动画</h2><p>帧动画，补间动画，属性动画</p>
<h2 id="19-Android6-0到9-0版本最大的新特性"><a href="#19-Android6-0到9-0版本最大的新特性" class="headerlink" title="19.Android6.0到9.0版本最大的新特性"></a>19.Android6.0到9.0版本最大的新特性</h2><p>6.0：运行时权限</p>
<p>7.0：fileProvider文件读取</p>
<p>8.0：多渠道notification通知</p>
<p>9.0：安装外部来源应用授权</p>
<h2 id="20View绘制过程"><a href="#20View绘制过程" class="headerlink" title="20View绘制过程"></a>20View绘制过程</h2><p>onMeassure-&gt;onLayout-&gt;onDraw</p>
<h2 id="21-设计模式五大原则"><a href="#21-设计模式五大原则" class="headerlink" title="21.设计模式五大原则"></a>21.设计模式五大原则</h2><p>单一职责：干一件事</p>
<p>开放关闭：对扩展开放，对修改关闭</p>
<p>里氏替换：父类调用，同样适用于子类</p>
<p>依赖倒置：实现依赖抽象，不要抽象依赖实现具体。</p>
<p>接口隔离：使用多个接口，不要一个接口干所有事</p>
<h2 id="22-屏幕适配方案"><a href="#22-屏幕适配方案" class="headerlink" title="22.屏幕适配方案"></a>22.屏幕适配方案</h2><p>px=dp<em>(dpi/160)=dp</em>density</p>
<p>尺寸（size）限定符 –缺点很多，不建议使用</p>
<p>最小宽度（Smallest-width）限定符</p>
<p>今日头条适配方案,setCustomDensity.非浸入。</p>
<p><a href="https://link.juejin.im?target=https%3A%2F%2Fwww.cnblogs.com%2Fonelikeone%2Fp%2F9583446.html" target="_blank" rel="noopener">www.cnblogs.com/onelikeone/…</a></p>
<h2 id="23-性能优化的几个方面"><a href="#23-性能优化的几个方面" class="headerlink" title="23.性能优化的几个方面"></a>23.性能优化的几个方面</h2><p>布局减少嵌套</p>
<p>代码优化，防止内存泄漏</p>
<p>耗电量方面</p>
<p>apk包瘦身</p>
<h2 id="24-序列化Serializable-Parcelable区别"><a href="#24-序列化Serializable-Parcelable区别" class="headerlink" title="24.序列化Serializable,Parcelable区别"></a>24.序列化Serializable,Parcelable区别</h2><p>serializable: java，大量产生临时变量，内存使用较大，频繁gc</p>
<p>parcelable: android ，内存较小</p>
<h2 id="25-列举几点内存泄漏案例案例以及解决办法"><a href="#25-列举几点内存泄漏案例案例以及解决办法" class="headerlink" title="25.列举几点内存泄漏案例案例以及解决办法"></a>25.列举几点内存泄漏案例案例以及解决办法</h2><h2 id="原因：长生命周期对象持有短生命周期的引用"><a href="#原因：长生命周期对象持有短生命周期的引用" class="headerlink" title="原因：长生命周期对象持有短生命周期的引用"></a>原因：长生命周期对象持有短生命周期的引用</h2><p>Context : Activity-&gt;Application</p>
<p>Handler: static</p>
<p>webView </p>
<p>imageView</p>
<p>未及时关闭资源对象</p>
<p><a href="https://link.juejin.im?target=https%3A%2F%2Fblog.csdn.net%2Funicorn97%2Farticle%2Fdetails%2F81009204" target="_blank" rel="noopener">blog.csdn.net/unicorn97/a…</a></p>
<h2 id="26-JVM-DVM-ART-JIT-AOT介绍"><a href="#26-JVM-DVM-ART-JIT-AOT介绍" class="headerlink" title="26.JVM,DVM,ART,JIT,AOT介绍"></a>26.JVM,DVM,ART,JIT,AOT介绍</h2><p>jvm：java虚拟机</p>
<p>dvm:&nbsp; Android虚拟机</p>
<p>ART: Android运行时</p>
<p>JIT：及时编译</p>
<p>AOT：预编译</p>
<p><a href="https://link.juejin.im?target=https%3A%2F%2Fblog.csdn.net%2Ffeather_wch%2Farticle%2Fdetails%2F79800614" target="_blank" rel="noopener">blog.csdn.net/feather_wch…</a></p>
<h2 id="27-sleep-wait区别"><a href="#27-sleep-wait区别" class="headerlink" title="27.sleep,wait区别"></a>27.sleep,wait区别</h2><p>sleep: 持有锁，Thread子类</p>
<p>wait：释放锁，Object子类</p>
<h2 id="28-五层网络协议"><a href="#28-五层网络协议" class="headerlink" title="28.五层网络协议"></a>28.五层网络协议</h2><p>应用层（http/https）</p>
<p>传输层 (TCP/UDP)</p>
<p>网络层（IP）</p>
<p>数据链路层</p>
<p>物理层</p>
<h2 id="29-保活的方式"><a href="#29-保活的方式" class="headerlink" title="29.保活的方式"></a>29.保活的方式</h2><p>黑色保活：app，sdk相互唤起</p>
<p>白色保活：启动前台service</p>
<p>灰色保活：启动两个相同id的Service,将后启动的Service,Stop掉</p>
<p><a href="https://link.juejin.im?target=https%3A%2F%2Fwww.jianshu.com%2Fp%2F63aafe3c12af" target="_blank" rel="noopener">www.jianshu.com/p/63aafe3c1…</a></p>
<h2 id="30-webView的webViewClient和WebChromeClient区别"><a href="#30-webView的webViewClient和WebChromeClient区别" class="headerlink" title="30.webView的webViewClient和WebChromeClient区别"></a>30.webView的webViewClient和WebChromeClient区别</h2><p>WebViewClient：帮助WebView处理各种通知、请求事件。</p>
<p>WebChromeClient：辅助WebView处理Javascript的对话框、网站图标、网站title、加载进度等</p>
<p><a href="https://link.juejin.im?target=https%3A%2F%2Fblog.csdn.net%2Fu012810020%2Farticle%2Fdetails%2F51820240" target="_blank" rel="noopener">blog.csdn.net/u012810020/…</a></p>
<h2 id="31-APK安装过程"><a href="#31-APK安装过程" class="headerlink" title="31.APK安装过程"></a>31.APK安装过程</h2><p>/data/app -&gt;androidManifest-&gt;dex-&gt;DVM cache-&gt;PackageManageService-&gt;BroadcastReceiver</p>
<h2 id="32-APK包瘦身"><a href="#32-APK包瘦身" class="headerlink" title="32.APK包瘦身"></a>32.APK包瘦身</h2><p>so库，混淆，加固，shrinkResource，减少枚举，图片(webp，.9）</p>
<h2 id="33-JVM内部结构"><a href="#33-JVM内部结构" class="headerlink" title="33.JVM内部结构"></a>33.JVM内部结构</h2><p>静态方法区，栈，堆</p>
<h2 id="34-IntentService-HandlerThread介绍"><a href="#34-IntentService-HandlerThread介绍" class="headerlink" title="34.IntentService,HandlerThread介绍"></a>34.IntentService,HandlerThread介绍</h2><p>IntentService是一个基于Service的一个类，用来处理异步的请求，内部是通过HandlerThread实现。</p>
<p><a href="https://link.juejin.im?target=https%3A%2F%2Fwww.cnblogs.com%2Fchenxibobo%2Fp%2F6047404.html" target="_blank" rel="noopener">www.cnblogs.com/chenxibobo/…</a></p>
<h2 id="35-Android五种存储方式"><a href="#35-Android五种存储方式" class="headerlink" title="35.Android五种存储方式"></a>35.Android五种存储方式</h2><p>sharePrefences,&nbsp; sqlLite, contentProvider, 文件，网络</p>
<h2 id="36-实现线程的两种方式"><a href="#36-实现线程的两种方式" class="headerlink" title="36.实现线程的两种方式"></a>36.实现线程的两种方式</h2><p>implements Runnable</p>
<p>extends Thread</p>
<h2 id="37-String-StringBuffer-StringBuilder区别"><a href="#37-String-StringBuffer-StringBuilder区别" class="headerlink" title="37.String,StringBuffer,StringBuilder区别"></a>37.String,StringBuffer,StringBuilder区别</h2><p>速度：StringBuilder-&gt;StringBuffer-&gt;String（不可变）</p>
<p>StringBuilder 非线程安全</p>
<h2 id="38-Synchronize-Volatile区别"><a href="#38-Synchronize-Volatile区别" class="headerlink" title="38.Synchronize,Volatile区别"></a>38.Synchronize,Volatile区别</h2><p>sychronize : 加锁</p>
<p>volatile: 可变，每次实时读取。</p>
<h2 id="39-ArrayList，LinkedList区别"><a href="#39-ArrayList，LinkedList区别" class="headerlink" title="39.ArrayList，LinkedList区别"></a>39.ArrayList，LinkedList区别</h2><p>arrayList：读取快</p>
<p>linkedList：插入快</p>

            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2018/07/28/Android7-0下载APK后自动安装/">
            <div class="nexmoe-post-cover mdui-ripple"> 
                
                    <img src="https://i.loli.net/2019/01/13/5c3aec85a4343.jpg" alt="Android7.0下载APK后自动安装">
                
                <h1>Android7.0下载APK后自动安装</h1>
            </div>
        </a>
        <div class="nexmoe-post-meta">
            <a><i class="nexmoefont icon-calendar-fill"></i>2018年07月28日</a>
            <a><i class="nexmoefont icon-areachart"></i>1.5k 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 7 分钟</a>
            
                <a class="nexmoefont icon-appstore-fill -link" href="/categories/Android/">Android</a><a class="nexmoefont icon-appstore-fill -link" href="/categories/Android/知识点/">知识点</a>
            
            
                <a class="nexmoefont icon-tag-fill -link" href="/tags/Android7-0/">Android7.0</a>
            
        </div>
        <article>
            
            <p><a href="https://www.cnblogs.com/bugzone/p/strictMode.html" target="_blank" rel="noopener">点击查看原文</a></p>
<div id="cnblogs_post_body" class="blogpost-body ">
    <p>&nbsp; &nbsp; &nbsp; &nbsp; 随着Android版本越来越高，Android对隐私的保护力度也越来越大。这些隐私权限的更改在为用户带来更加安全的操作系统的同时也为开发者带来了一些新的任务。如何让你的APP能够适应这些改变而不是崩溃，是每一位Android开发者必须要了解学习的。<br>        </p>
<h2>一.引言</h2>
<p>    　　Android 6.0引入了动态权限控制.<br>    　　Android 7.0 引入了私有目录被限制访问和StrictMode API ,在7.0上应用私有目录将被限制访问，这与iOS的沙盒机制类似,StrictMode API是指禁止向你的应用外公开 file:// URI。 如果一项包含文件 file:// URI类型 的 Intent 离开你的应用，则会报出异常。这项权限的变更将意味着你无法通过File API访问手机存储上的数据了，基于File API的一些文件浏览器等也将受到很大的影响.<br>    　　所以在7.0系统上,给其他应用传递 file:// URI 类型的Uri，可能会导致接受者无法访问该路径。 因此，在Android7.0中尝试传递 file:// URI 会触发 FileUriExposedException。解决办法就是可以通过使用<strong>FileProvider</strong>来解决这一问题.<br>        </p>
<h2>二. 两种实现自动下载安装方式</h2>
<p>　　两种下载方式入口:</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码" target="_blank" rel="noopener"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #008000;">　　/*</span><span style="color: #008000;">*
     * @param context
     * @param apkUrl      APK下载路径
     * @param fileName    APK下载自定义名称
     * @param webViewMode 是否是浏览器模式下载
     </span><span style="color: #008000;">*/</span>
    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> install(Context context, String apkUrl, String fileName, boolean webViewMode) {
        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (webViewMode) {
            downloadByWeb(context, apkUrl);
        } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
            downloadBySelf(context, apkUrl, fileName);
        }
    }</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码" target="_blank" rel="noopener"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></span></div></div>
<h4>　　1. 通过手机内置浏览器来下载安装更新APP. 　　　　</h4>
<p>　　这种方式将下载和安装更新操作交给浏览器操作了,很简单,但是这种也是不受控的.有时候浏览器会推荐一系列的广告App伴随下载,不小心就会中招.</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码" target="_blank" rel="noopener"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #008000;">　　//</span><span style="color: #008000;">通过浏览器方式下载并安装</span>
    <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> downloadByWeb(Context context, String apkPath) {
        Uri uri </span>=<span style="color: #000000;"> Uri.parse(apkPath);
        </span><span style="color: #008000;">//</span><span style="color: #008000;">String android.intent.action.VIEW 比较通用，会根据用户的数据类型打开相应的Activity。如:浏览器,电话,播放器,地图</span>
        Intent intent = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Intent(Intent.ACTION_VIEW, uri);
        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(intent);
    }</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码" target="_blank" rel="noopener"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></span></div></div>
<h4>　　2. 通过DownloadManager 下载APK,并提示安装</h4>
<h5>　　　　2.1 通过DownloadManager</h5>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码" target="_blank" rel="noopener"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #0000ff;">　　　　private</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> downloadBySelf(Context context, String apkUrl, String fileName) {
                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (TextUtils.isEmpty(apkUrl)) {
                    </span><span style="color: #0000ff;">return</span><span style="color: #000000;">;
                }
                </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
                    Uri uri </span>=<span style="color: #000000;"> Uri.parse(apkUrl);
                    DownloadManager downloadManager </span>=<span style="color: #000000;"> (DownloadManager) context
                            .getSystemService(Context.DOWNLOAD_SERVICE);
                    DownloadManager.Request request </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> DownloadManager.Request(uri);
                    </span><span style="color: #008000;">//</span><span style="color: #008000;">在通知栏中显示</span>
                    request.setVisibleInDownloadsUi(<span style="color: #0000ff;">true</span><span style="color: #000000;">);
                    request.setTitle(</span><span style="color: #800000;">"</span><span style="color: #800000;">应用更新</span><span style="color: #800000;">"</span><span style="color: #000000;">);
                    request.setDescription(</span><span style="color: #800000;">"</span><span style="color: #800000;">本次更新描述</span><span style="color: #800000;">"</span><span style="color: #000000;">)
                    </span><span style="color: #008000;">//</span><span style="color: #008000;">MIME_MapTable是所有文件的后缀名所对应的MIME类型的一个String数组  {".apk",    "application/vnd.android.package-archive"},</span>
                    request.setMimeType(<span style="color: #800000;">"</span><span style="color: #800000;">application/vnd.android.package-archive</span><span style="color: #800000;">"</span><span style="color: #000000;">);
                    </span><span style="color: #008000;">//</span><span style="color: #008000;"> 在通知栏通知下载中和下载完成
                    </span><span style="color: #008000;">//</span><span style="color: #008000;"> 下载完成后该Notification才会被显示</span>
                    <span style="color: #0000ff;">if</span> (Build.VERSION.SDK_INT &gt;<span style="color: #000000;"> Build.VERSION_CODES.HONEYCOMB) {
                        </span><span style="color: #008000;">//</span><span style="color: #008000;"> Android 3.0版本 以后才有该方法
                        </span><span style="color: #008000;">//</span><span style="color: #008000;">在下载过程中通知栏会一直显示该下载的Notification，在下载完成后该Notification会继续显示，直到用户点击该Notification或者消除该Notification</span>
<span style="color: #000000;">                        request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
                    }
                    String filePath </span>= <span style="color: #0000ff;">null</span><span style="color: #000000;">;
                    </span><span style="color: #0000ff;">if</span> (Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)) {<span style="color: #008000;">//</span><span style="color: #008000;">外部存储卡</span>
                        filePath =<span style="color: #000000;"> Environment.getExternalStorageDirectory().getAbsolutePath();
                    } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                        Log.i(TAG, </span><span style="color: #800000;">"</span><span style="color: #800000;">没有SD卡</span><span style="color: #800000;">"</span><span style="color: #000000;">);
                        </span><span style="color: #0000ff;">return</span><span style="color: #000000;">;
                    }
                    downloadUpdateApkFilePath </span>= filePath + File.separator + fileName + System.currentTimeMillis() + <span style="color: #800000;">"</span><span style="color: #800000;">.apk</span><span style="color: #800000;">"</span><span style="color: #000000;">;
                    </span><span style="color: #008000;">//</span><span style="color: #008000;"> 若存在，则删除 (这里具体逻辑具体看,我这里是删除)</span>
<span style="color: #000000;">                    deleteFile(downloadUpdateApkFilePath);
                    Uri fileUri </span>= Uri.fromFile(<span style="color: #0000ff;">new</span><span style="color: #000000;"> File(downloadUpdateApkFilePath));
                    request.setDestinationUri(fileUri);
                    </span><span style="color: #008000;">//</span><span style="color: #008000;">下载管理Id</span>
<span style="color: #000000;">                    downloadManager.enqueue(request);
                    DownloadReceiver mDownloaderReceiver </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> DownloadReceiver();
                    </span><span style="color: #008000;">//</span><span style="color: #008000;">注册下载完成广播</span>
                    context.registerReceiver(mDownloaderReceiver, <span style="color: #0000ff;">new</span><span style="color: #000000;"> IntentFilter(DownloadManager.ACTION_DOWNLOAD_COMPLETE));

<pre><code>} &lt;/span&gt;&lt;span style=&quot;color: #0000ff;&quot;&gt;catch&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt; (Exception e) {
    e.printStackTrace();
    &lt;/span&gt;&lt;span style=&quot;color: #008000;&quot;&gt;//&lt;/span&gt;&lt;span style=&quot;color: #008000;&quot;&gt;注意:如果文件下载失败则 使用浏览器下载
    &lt;/span&gt;&lt;span style=&quot;color: #008000;&quot;&gt;//&lt;/span&gt;&lt;span style=&quot;color: #008000;&quot;&gt; downloadByWeb(context, apkUrl);&lt;/span&gt;</code></pre><p><span style="color: #000000;">                }<br>            }</span></p></span></pre><p></p>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码" target="_blank" rel="noopener"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></span></div></div>
<h5>　　　　2.2 通过广播监控下载完成,调至提示用户安装操作.</h5>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码" target="_blank" rel="noopener"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></span></div>
<pre>    　　　　<span style="color: #008000;">/*</span><span style="color: #008000;">*
             * 下载完成的广播
             </span><span style="color: #008000;">*/</span>
            <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> DownloadReceiver extends BroadcastReceiver {
                @Override
                </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> onReceive(Context context, Intent intent) {
                    </span><span style="color: #0000ff;">if</span> (!<span style="color: #000000;">TextUtils.isEmpty(downloadUpdateApkFilePath)) {
                        installNormal(context, downloadUpdateApkFilePath);
                    }
                }
            }</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码" target="_blank" rel="noopener"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></span></div></div>
<h5>　　　　2.3 提示用户安装或者更新</h5>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码" target="_blank" rel="noopener"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #008000;">　　　　/*</span><span style="color: #008000;">*
         * 提示安装
         * @param context 上下文
         * @param apkPath apk下载完成在手机中的路径
         </span><span style="color: #008000;">*/</span>
        <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> installNormal(Context context, String apkPath) {
            Intent intent </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> Intent(Intent.ACTION_VIEW);
            </span><span style="color: #008000;">//</span><span style="color: #008000;">版本在7.0以上是不能直接通过uri访问的</span>
            <span style="color: #0000ff;">if</span> (Build.VERSION.SDK_INT &gt;<span style="color: #000000;"> Build.VERSION_CODES.N) {
                File file </span>= (<span style="color: #0000ff;">new</span><span style="color: #000000;"> File(apkPath));
                </span><span style="color: #008000;">//</span><span style="color: #008000;"> 由于没有在Activity环境下启动Activity,设置下面的标签</span>
<span style="color: #000000;">                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                </span><span style="color: #008000;">//</span><span style="color: #008000;">参数1:上下文, 参数2:Provider主机地址 和配置文件中保持一致,参数3:共享的文件</span>
                Uri apkUri = FileProvider.getUriForFile(context, <span style="color: #800000;">"</span><span style="color: #800000;">com.xxxxx.fileprovider</span><span style="color: #800000;">"</span><span style="color: #000000;">, file);
                </span><span style="color: #008000;">//</span><span style="color: #008000;">添加这一句表示对目标应用临时授权该Uri所代表的文件</span>
<span style="color: #000000;">                intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
                intent.setDataAndType(apkUri, </span><span style="color: #800000;">"</span><span style="color: #800000;">application/vnd.android.package-archive</span><span style="color: #800000;">"</span><span style="color: #000000;">);
            } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                intent.setDataAndType(Uri.fromFile(</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> File(apkPath)),
                        </span><span style="color: #800000;">"</span><span style="color: #800000;">application/vnd.android.package-archive</span><span style="color: #800000;">"</span><span style="color: #000000;">);
            }
            context.startActivity(intent);
        }</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码" target="_blank" rel="noopener"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></span></div></div>
<h2>三. 补充</h2>
<p>　　MIME_MapTable是所有文件的后缀名所对应的MIME类型的一个String数组</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码" target="_blank" rel="noopener"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #008000;">　　　　　　　　//</span><span style="color: #008000;">{后缀名，MIME类型} </span>
            {<span style="color: #800000;">"</span><span style="color: #800000;">.3gp</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">video/3gpp</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.apk</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">application/vnd.android.package-archive</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.asf</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">video/x-ms-asf</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.avi</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">video/x-msvideo</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.bin</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">application/octet-stream</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.bmp</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">image/bmp</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.c</span><span style="color: #800000;">"</span>,  <span style="color: #800000;">"</span><span style="color: #800000;">text/plain</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.class</span><span style="color: #800000;">"</span>,  <span style="color: #800000;">"</span><span style="color: #800000;">application/octet-stream</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.conf</span><span style="color: #800000;">"</span>,   <span style="color: #800000;">"</span><span style="color: #800000;">text/plain</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.cpp</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">text/plain</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.doc</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">application/msword</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.docx</span><span style="color: #800000;">"</span>,   <span style="color: #800000;">"</span><span style="color: #800000;">application/vnd.openxmlformats-officedocument.wordprocessingml.document</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.xls</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">application/vnd.ms-excel</span><span style="color: #800000;">"</span><span style="color: #000000;">},  
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.xlsx</span><span style="color: #800000;">"</span>,   <span style="color: #800000;">"</span><span style="color: #800000;">application/vnd.openxmlformats-officedocument.spreadsheetml.sheet</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.exe</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">application/octet-stream</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.gif</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">image/gif</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.gtar</span><span style="color: #800000;">"</span>,   <span style="color: #800000;">"</span><span style="color: #800000;">application/x-gtar</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.gz</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">application/x-gzip</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.h</span><span style="color: #800000;">"</span>,  <span style="color: #800000;">"</span><span style="color: #800000;">text/plain</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.htm</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">text/html</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.html</span><span style="color: #800000;">"</span>,   <span style="color: #800000;">"</span><span style="color: #800000;">text/html</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.jar</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">application/java-archive</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.java</span><span style="color: #800000;">"</span>,   <span style="color: #800000;">"</span><span style="color: #800000;">text/plain</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.jpeg</span><span style="color: #800000;">"</span>,   <span style="color: #800000;">"</span><span style="color: #800000;">image/jpeg</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.jpg</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">image/jpeg</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.js</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">application/x-javascript</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.log</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">text/plain</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.m3u</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">audio/x-mpegurl</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.m4a</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">audio/mp4a-latm</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.m4b</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">audio/mp4a-latm</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.m4p</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">audio/mp4a-latm</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.m4u</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">video/vnd.mpegurl</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.m4v</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">video/x-m4v</span><span style="color: #800000;">"</span><span style="color: #000000;">},  
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.mov</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">video/quicktime</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.mp2</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">audio/x-mpeg</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.mp3</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">audio/x-mpeg</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.mp4</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">video/mp4</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.mpc</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">application/vnd.mpohun.certificate</span><span style="color: #800000;">"</span><span style="color: #000000;">},        
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.mpe</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">video/mpeg</span><span style="color: #800000;">"</span><span style="color: #000000;">},   
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.mpeg</span><span style="color: #800000;">"</span>,   <span style="color: #800000;">"</span><span style="color: #800000;">video/mpeg</span><span style="color: #800000;">"</span><span style="color: #000000;">},   
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.mpg</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">video/mpeg</span><span style="color: #800000;">"</span><span style="color: #000000;">},   
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.mpg4</span><span style="color: #800000;">"</span>,   <span style="color: #800000;">"</span><span style="color: #800000;">video/mp4</span><span style="color: #800000;">"</span><span style="color: #000000;">},    
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.mpga</span><span style="color: #800000;">"</span>,   <span style="color: #800000;">"</span><span style="color: #800000;">audio/mpeg</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.msg</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">application/vnd.ms-outlook</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.ogg</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">audio/ogg</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.pdf</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">application/pdf</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.png</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">image/png</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.pps</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">application/vnd.ms-powerpoint</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.ppt</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">application/vnd.ms-powerpoint</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.pptx</span><span style="color: #800000;">"</span>,   <span style="color: #800000;">"</span><span style="color: #800000;">application/vnd.openxmlformats-officedocument.presentationml.presentation</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.prop</span><span style="color: #800000;">"</span>,   <span style="color: #800000;">"</span><span style="color: #800000;">text/plain</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.rc</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">text/plain</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.rmvb</span><span style="color: #800000;">"</span>,   <span style="color: #800000;">"</span><span style="color: #800000;">audio/x-pn-realaudio</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.rtf</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">application/rtf</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.sh</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">text/plain</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.tar</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">application/x-tar</span><span style="color: #800000;">"</span><span style="color: #000000;">},    
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.tgz</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">application/x-compressed</span><span style="color: #800000;">"</span><span style="color: #000000;">},  
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.txt</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">text/plain</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.wav</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">audio/x-wav</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.wma</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">audio/x-ms-wma</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.wmv</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">audio/x-ms-wmv</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.wps</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">application/vnd.ms-works</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.xml</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">text/plain</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.z</span><span style="color: #800000;">"</span>,  <span style="color: #800000;">"</span><span style="color: #800000;">application/x-compress</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">"</span><span style="color: #800000;">.zip</span><span style="color: #800000;">"</span>,    <span style="color: #800000;">"</span><span style="color: #800000;">application/x-zip-compressed</span><span style="color: #800000;">"</span><span style="color: #000000;">}, 
            {</span><span style="color: #800000;">""</span>,        <span style="color: #800000;">"</span><span style="color: #800000;">*/*</span><span style="color: #800000;">"</span>} </pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码" target="_blank" rel="noopener"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></span></div></div>
<p>&nbsp;</p>
</div>
            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2018/07/22/Serializable和Parcelable之序列化/">
            <div class="nexmoe-post-cover mdui-ripple"> 
                
                    <img src="https://i.loli.net/2019/01/13/5c3aec85a4343.jpg" alt="Serializable和Parcelable之序列化">
                
                <h1>Serializable和Parcelable之序列化</h1>
            </div>
        </a>
        <div class="nexmoe-post-meta">
            <a><i class="nexmoefont icon-calendar-fill"></i>2018年07月22日</a>
            <a><i class="nexmoefont icon-areachart"></i>1.8k 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 8 分钟</a>
            
                <a class="nexmoefont icon-appstore-fill -link" href="/categories/Android/">Android</a><a class="nexmoefont icon-appstore-fill -link" href="/categories/Android/知识点/">知识点</a>
            
            
                <a class="nexmoefont icon-tag-fill -link" href="/tags/序列化/">序列化</a>
            
        </div>
        <article>
            
            <p><a href="https://www.cnblogs.com/bugzone/p/Serializable_Parcelable.html" target="_blank" rel="noopener">点击查看原文</a></p>
<div id="cnblogs_post_body" class="blogpost-body ">
    <div>序列化，表示将一个对象转换成可存储或可传输的状态。序列化后的对象可以在网络上进行传输，也可以存储到本地。
<h3>&nbsp;一.Serializable和Parcelable介绍</h3>
&nbsp;Android中Intent如果要传递类对象，可以通过两种方式实现。<br>&nbsp;&nbsp;方式一：Serializable，要传递的类实现Serializable接口传递对象，<br>&nbsp;&nbsp;方式二：Parcelable，要传递的类实现Parcelable接口传递对象。<br>&nbsp;&nbsp;<br>&nbsp;Serializable（Java自带）： <br>&nbsp;&nbsp;Serializable是序列化的意思，表示将一个对象转换成可存储或可传输的状态。序列化后的对象可以在网络上进行传输，也可以存储到本地。只需要实现Serializable接口就可以，是由系统来完成序列化和反序列化操作。<br>&nbsp;Parcelable（android 专用）： <br>&nbsp;&nbsp;除了Serializable之外，使用Parcelable也可以实现相同的效果， <br>&nbsp;&nbsp;不过不同于将对象进行序列化，Parcelable方式的实现原理是将一个完整的对象进行分解， <br>&nbsp;&nbsp;而分解后的每一部分都是Intent所支持的数据类型，这样也就实现传递对象的功能了。 &nbsp;
<h3>&nbsp;二.Serializable和Parcelable对比&nbsp;</h3>

<p>&nbsp;1.在使用内存的时候，Parcelable比Serializable性能高，所以推荐使用Parcelable。<br>&nbsp;2.Serializable在序列化的时候会产生大量的临时变量，从而引起频繁的GC。<br>&nbsp;3.Parcelable无法将数据进行持久化,因此在将数据保存在磁盘的时候,仍然需要使用后者,因为前者无法很好的将数据进行持久化.(原因是在不同的Android版本当中,Parcelable可能会不同,因此数据的持久化方面仍然是使用Serializable)<br>&nbsp;4.Parcelable 不仅仅需要声明,还需要实现内部的相应方法.writeToParcel;重写describeContents方法,默认值为0;Public static final Parcelable.Creator&lt;T&gt;CREATOR = new CREATOR&lt;T&gt;(){…}<br>&nbsp;5.Parcelable是以Ibinder作为信息载体的.在内存上的开销比较小,因此在内存之间进行数据传递的时候,Android推荐使用Parcelable,既然是内存方面比价有优势,那么自然就要优先选择.<br>&nbsp;6.在读写数据的时候,Parcelable是在内存中直接进行读写,而Serializable是通过使用IO流的形式将数据读写入在硬盘上.&nbsp;</p></div><p></p>
<div>
<h3>&nbsp;三.序列化 运用场景</h3>

</div>
<div>&nbsp;注意：不想对部分关键字进行序列化,可以使用transient关键字来修饰以及static修饰.<br>&nbsp;1.永久的保存对象数据(将对象数据保存在文件当中,或者是磁盘中<br>&nbsp;2.通过序列化操作将对象数据在网络上进行传输(由于网络传输是以字节流的方式对数据进行传输的.因此序列化的目的是将对象数据转换成字节流的形式)<br>&nbsp;3.将对象数据在进程之间进行传递(Activity之间传递对象数据时,需要在当前的Activity中对对象数据进行序列化操作.在另一个Activity中需要进行反序列化操作讲数据取出)<br>&nbsp;4.Java平台允许我们在内存中创建可复用的Java对象，但一般情况下，只有当JVM处于运行时，这些对象才可能存在，即，这些对象的生命周期不会比JVM的生命周期更长（即每个对象都在JVM中）但在现实应用中，就可能要停止JVM运行，但有要保存某些指定的对象，并在将来重新读取被保存的对象。这是Java对象序列化就能够实现该功能。（可选择入数据库、或文件的形式保存）<br>&nbsp;5.序列化对象的时候只是针对变量进行序列化,不针对方法进行序列化.<br>&nbsp;6.在Intent之间,基本的数据类型直接进行相关传递即可,但是一旦数据类型比较复杂的时候,就需要进行序列化操作了.&nbsp;
<h3>&nbsp;四.总结：</h3>

<p>&nbsp;&nbsp;Java应用程序中有Serializable来实现序列化操作,Android中有Parcelable来实现序列化操作,相关的性能也作出了比较,因此<strong>在Android中除了对数据持久化的时候需要使用到Serializable来实现序列化操作,其他的时候我们仍然需要使用Parcelable来实现序列化操作</strong>,因为在Android中效率并不是最重要的,而是内存,通过比较Parcelable在效率和内存上都要优秀与Serializable.<br>&nbsp;<br>&nbsp;<br>&nbsp;附上Parcelable.java源码 主要describeContents(),writeToParcel(Parcel dest, @WriteFlags int flags),interface Creator&lt;T&gt;{}</p></div><p></p>
<div>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码" target="_blank" rel="noopener"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></span></div>
<pre>    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">interface</span><span style="color: #000000;"> Parcelable {

<pre><code>    &lt;/span&gt;&lt;span style=&quot;color: #008000;&quot;&gt;/*&lt;/span&gt;&lt;span style=&quot;color: #008000;&quot;&gt;*
     * Describe the kinds of special objects contained in this Parcelable
     * instance&apos;s marshaled representation. For example, if the object will
     * include a file descriptor in the output of {@link #writeToParcel(Parcel, int)},
     * the return value of this method must include the
     * {@link #CONTENTS_FILE_DESCRIPTOR} bit.
     *  
     * @return a bitmask indicating the set of special object types marshaled
     * by this Parcelable object instance.
     &lt;/span&gt;&lt;span style=&quot;color: #008000;&quot;&gt;*/&lt;/span&gt;
    &lt;span style=&quot;color: #0000ff;&quot;&gt;public&lt;/span&gt; @ContentsFlags &lt;span style=&quot;color: #0000ff;&quot;&gt;int&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt; describeContents();

    &lt;/span&gt;&lt;span style=&quot;color: #008000;&quot;&gt;/*&lt;/span&gt;&lt;span style=&quot;color: #008000;&quot;&gt;*
     * Flatten this object in to a Parcel.
     * 
     * @param dest The Parcel in which the object should be written.
     * @param flags Additional flags about how the object should be written.
     * May be 0 or {@link #PARCELABLE_WRITE_RETURN_VALUE}.
     &lt;/span&gt;&lt;span style=&quot;color: #008000;&quot;&gt;*/&lt;/span&gt;
    &lt;span style=&quot;color: #0000ff;&quot;&gt;public&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;void&lt;/span&gt; writeToParcel(Parcel dest, @WriteFlags &lt;span style=&quot;color: #0000ff;&quot;&gt;int&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt; flags);

    &lt;/span&gt;&lt;span style=&quot;color: #008000;&quot;&gt;/*&lt;/span&gt;&lt;span style=&quot;color: #008000;&quot;&gt;*
     * Interface that must be implemented and provided as a public CREATOR
     * field that generates instances of your Parcelable class from a Parcel.
     &lt;/span&gt;&lt;span style=&quot;color: #008000;&quot;&gt;*/&lt;/span&gt;
    &lt;span style=&quot;color: #0000ff;&quot;&gt;public&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;interface&lt;/span&gt; Creator&amp;lt;T&amp;gt;&lt;span style=&quot;color: #000000;&quot;&gt; {
        &lt;/span&gt;&lt;span style=&quot;color: #008000;&quot;&gt;/*&lt;/span&gt;&lt;span style=&quot;color: #008000;&quot;&gt;*
         * Create a new instance of the Parcelable class, instantiating it
         * from the given Parcel whose data had previously been written by
         * {@link Parcelable#writeToParcel Parcelable.writeToParcel()}.
         * 
         * @param source The Parcel to read the object&apos;s data from.
         * @return Returns a new instance of the Parcelable class.
         &lt;/span&gt;&lt;span style=&quot;color: #008000;&quot;&gt;*/&lt;/span&gt;
        &lt;span style=&quot;color: #0000ff;&quot;&gt;public&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt; T createFromParcel(Parcel source);

        &lt;/span&gt;&lt;span style=&quot;color: #008000;&quot;&gt;/*&lt;/span&gt;&lt;span style=&quot;color: #008000;&quot;&gt;*
         * Create a new array of the Parcelable class.
         * 
         * @param size Size of the array.
         * @return Returns an array of the Parcelable class, with every entry
         * initialized to null.
         &lt;/span&gt;&lt;span style=&quot;color: #008000;&quot;&gt;*/&lt;/span&gt;
        &lt;span style=&quot;color: #0000ff;&quot;&gt;public&lt;/span&gt; T[] newArray(&lt;span style=&quot;color: #0000ff;&quot;&gt;int&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt; size);
    }


}&lt;/span&gt;&lt;/pre&gt;</code></pre><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码" target="_blank" rel="noopener"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></span></div></span></pre></div>
<p>[1]&nbsp;序列化Serializable和Parcelable的理解和区别 https://blog.csdn.net/Double2hao/article/details/70145747</p>
<p>[2] Android中Serializable和Parcelable序列化对象详解 https://www.cnblogs.com/yezhennan/p/5527506.html</p>
</div>
</div>

            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2018/07/21/ViewPager相关使用/">
            <div class="nexmoe-post-cover mdui-ripple"> 
                
                    <img src="https://i.loli.net/2019/01/13/5c3aec85a4343.jpg" alt="ViewPager相关使用">
                
                <h1>ViewPager相关使用</h1>
            </div>
        </a>
        <div class="nexmoe-post-meta">
            <a><i class="nexmoefont icon-calendar-fill"></i>2018年07月21日</a>
            <a><i class="nexmoefont icon-areachart"></i>893 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 4 分钟</a>
            
                <a class="nexmoefont icon-appstore-fill -link" href="/categories/Android/">Android</a><a class="nexmoefont icon-appstore-fill -link" href="/categories/Android/知识点/">知识点</a>
            
            
                <a class="nexmoefont icon-tag-fill -link" href="/tags/ViewPager/">ViewPager</a>
            
        </div>
        <article>
            
            <p><a href="https://www.cnblogs.com/bugzone/p/viewpager.html" target="_blank" rel="noopener">点击查看原文</a></p>
<div id="cnblogs_post_body" class="blogpost-body ">
    <h2>一.ViewPager+Fragment 预加载</h2>
<p>&nbsp;ViewPager的预加载，是指ViewPager的内部加载数据机制，它会默认至少预加载一个相邻的ViewPager内的Fragment页数据。<br>&nbsp;<br>&nbsp;如果设置 viewpager.setOffscreenPageLimit(0); 会发现没有效果。<br>&nbsp;可以查看ViewPager.java源码我们知道，ViewPager默认必须预加载一个相邻页面的数据。</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码" target="_blank" rel="noopener"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> ViewPager extends ViewGroup {
    ...
    </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> final <span style="color: #0000ff;">int</span> DEFAULT_OFFSCREEN_PAGES = <span style="color: #800080;">1</span><span style="color: #000000;">;
    ...
    </span><span style="color: #008000;">/*</span><span style="color: #008000;">*
     * Set the number of pages that should be retained to either side of the
     * current page in the view hierarchy in an idle state. Pages beyond this
     * limit will be recreated from the adapter when needed.
     *
     * &lt;p&gt;This is offered as an optimization. If you know in advance the number
     * of pages you will need to support or have lazy-loading mechanisms in place
     * on your pages, tweaking this setting can have benefits in perceived smoothness
     * of paging animations and interaction. If you have a small number of pages (3-4)
     * that you can keep active all at once, less time will be spent in layout for
     * newly created view subtrees as the user pages back and forth.&lt;/p&gt;
     *
     * &lt;p&gt;You should keep this limit low, especially if your pages have complex layouts.
     * This setting defaults to 1.&lt;/p&gt;
     *
     * @param limit How many pages will be kept offscreen in an idle state.
     </span><span style="color: #008000;">*/</span>
    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> setOffscreenPageLimit(<span style="color: #0000ff;">int</span><span style="color: #000000;"> limit) {
        </span><span style="color: #0000ff;">if</span> (limit &lt;<span style="color: #000000;"> DEFAULT_OFFSCREEN_PAGES) {
            Log.w(TAG, </span><span style="color: #800000;">"</span><span style="color: #800000;">Requested offscreen page limit </span><span style="color: #800000;">"</span> + limit + <span style="color: #800000;">"</span><span style="color: #800000;"> too small; defaulting to </span><span style="color: #800000;">"</span> +<span style="color: #000000;">
                    DEFAULT_OFFSCREEN_PAGES);
            limit </span>=<span style="color: #000000;"> DEFAULT_OFFSCREEN_PAGES;
        }
        </span><span style="color: #0000ff;">if</span> (limit !=<span style="color: #000000;"> mOffscreenPageLimit) {
            mOffscreenPageLimit </span>=<span style="color: #000000;"> limit;
            populate();
        }
    }
    ...
}</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码" target="_blank" rel="noopener"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></span></div></div>
<div>&nbsp; &nbsp; 如果确实有时候非要相邻的Fragment页面需要实时显示的时候就要刷新数据，我们可以使用Fragment里的一个方法。<br>&nbsp; &nbsp; 重写 public void setUserVisibleHint(boolean isVisibleToUser) {...} 来处理请求刷新数据。</div>
<div>&nbsp; &nbsp; 当然也有很多其他方法来解决页面立即刷新问题，比如：利用EventBus监听事件刷新，或者FragmentManager来控制Fragment响应事件的触发更新等等。</div>
<div>&nbsp;</div>
<div>
<div>
<h2>二.FragmentStatePagerAdapter 和 FragmentPagerAdapter</h2>
<br>&nbsp;&nbsp;&nbsp;&nbsp; ViewPager 经常和 Fragment 一起使用，并且提供了专门的 FragmentPagerAdapter 和 FragmentStatePagerAdapter 类供 Fragment 中的 ViewPager 使用。</div>
<div>
<h4>&nbsp;1.FragmentStatePagerAdapter</h4>
Implementation of PagerAdapter that uses a Fragment to manage each page. This class also handles saving and restoring of fragment's state. <br>&nbsp;&nbsp;&nbsp; This version of the pager is more useful when there are a large number of pages, working more like a list view. <br>&nbsp;When pages are not visible to the user, their entire fragment may be destroyed, only keeping the saved state of that fragment.<br>&nbsp;This allows the pager to hold on to much less memory associated with each visited page as compared to FragmentPagerAdapter at the cost of potentially more overhead when switching between pages. <br>&nbsp;&nbsp;&nbsp; When using FragmentPagerAdapter the host ViewPager must have a valid ID set.<br>&nbsp;&nbsp;&nbsp; Subclasses only need to implement getItem(int) and getCount() to have a working adapter. </div>
<div>&nbsp;</div>
<div>&nbsp; &nbsp;&nbsp; 从FragmentStatePagerAdapter的Api可知。<strong>当ViewPager管理的页面有大量数据时候，也就是如果viewpager管理的页面是一个ListView时候，推荐使用FragmentStatePagerAdapter</strong>。这是因为FragmentStatePagerAdapter在页面不可见的时候，会销毁这个Fragment。所以FragmentStatePagerAdapter比FragmentPagerAdapter占用内存更小。<br>
<h4> 2.FragmentPagerAdapter</h4>
&nbsp;Implementation of PagerAdapter that represents each page as a Fragment that is persistently kept in the fragment manager as long as the user can return to the page. <br>&nbsp;This version of the pager is best for use when there are a handful of typically more static fragments to be paged through, such as a set of tabs. The fragment of each page the user visits will be kept in memory, <br>&nbsp;though its view hierarchy may be destroyed when not visible. This can result in using a significant amount of memory since fragment instances can hold on to an arbitrary amount of state. <br>&nbsp;For larger sets of pages, consider FragmentStatePagerAdapter. <br>&nbsp;When using FragmentPagerAdapter the host ViewPager must have a valid ID set.<br>&nbsp;Subclasses only need to implement getItem(int) and getCount() to have a working adapter. <br>&nbsp;<br>&nbsp;从FragmentPagerAdapter的Api也同样了解到，当页面有大量数据加载的时候推荐使用FragmentStatePagerAdapter，FragmentPagerAdapter 创建的 fragment 永远不会被销毁，一般用于<strong>只有少量固定的 fragment 时，可以选择 FragmentPagerAdapter</strong>。<br>&nbsp;<br><br>&nbsp;最后说一点，在内存优化上，<strong>RecyclerView要比ViewPager优秀</strong>些。推荐大家优先考虑使用RecyclerView 实现。</div>
</div>
</div>
            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2018/07/21/AIDL介绍以及简单使用/">
            <div class="nexmoe-post-cover mdui-ripple"> 
                
                    <img src="https://i.loli.net/2019/01/13/5c3aec85a4343.jpg" alt="AIDL介绍以及简单使用">
                
                <h1>AIDL介绍以及简单使用</h1>
            </div>
        </a>
        <div class="nexmoe-post-meta">
            <a><i class="nexmoefont icon-calendar-fill"></i>2018年07月21日</a>
            <a><i class="nexmoefont icon-areachart"></i>3.6k 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 20 分钟</a>
            
                <a class="nexmoefont icon-appstore-fill -link" href="/categories/Android/">Android</a><a class="nexmoefont icon-appstore-fill -link" href="/categories/Android/知识点/">知识点</a>
            
            
                <a class="nexmoefont icon-tag-fill -link" href="/tags/AIDL/">AIDL</a>
            
        </div>
        <article>
            
            <p><a href="https://www.cnblogs.com/bugzone/p/aidl.html" target="_blank" rel="noopener">点击查看原文</a></p>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
    <div class="toc">
    <p class="toc-title">目录</p>
    <div class="toc-list">
        <ul>
        <li><a href="#一.-aidl-介绍.">一. AIDL 介绍.</a></li>
        <li><a href="#二.-aidl简单应用.">二. AIDL简单应用.</a><ul>
        <li><a href="#aidl_server端">Aidl_Server端</a></li>
        </ul></li>
        <li><a href="#section"></a><ul>
        <li><a href="#aidl_client端">Aidl_Client端</a></li>
        </ul></li>
        <li><a href="#三.注意事项">三.注意事项</a></li>
        </ul>
    </div>
</div>
<h2 id="一.-aidl-介绍.">一. AIDL 介绍.</h2>
<pre><code class="hljs"> AIDL（Android接口描述语言）是一个IDL语言，它可以生成一段代码，可以是一个在Android设备上运行的两个进程使用内部通信进程进行交互。</code></pre>
<p>如果你想在一个进程中（例如在一个Activity中）访问另一个进程中（例如service）某个对象的方法，你就可以使用AIDL来生成这样的代码来伪装传递各种参数。</p>
<p>稍微了解下几个常见的名词(IPC,匿名共享内存,Binder,Aidl,消息,广播,ContentProvider,Intent):<br>
<strong>IPC是一种概念，即进程间通信；其它几个都是Android里的概念；</strong><br>
<strong>匿名共享内存(Anonymous Shared Memory):其作用之一即通过Binder进程间通信机制来实现进程间的内存共享。 </strong><br>
<strong>Binder:Binder是对IPC的具体实行，是IPC的一种具体实现.其本质也是调用系统底层的共享内存实现.</strong><br>
<strong>AIDL:进程间的通信，速度快(系统底层直接是共享内存)，性能稳，效率高，一般进程间通信就用它. AIDL是Binder机制向外提供的接口，目的就是为了方便对Binder的使用；</strong><br>
<strong>消息(Messager)：Messenger本质也是AIDL，只是进行了封装，开发的时候不用再写.aidl文件,效率应该是和Aidl是一样的，与Aidl的区别在于Messager是线程安全的，而Aidl是非线程安全的，所以Aidl在使用的时候应该注意这个问题;</strong><br>
<strong>广播(BroadcastReceiver):只要注册了广播，都能收到，有点范围广，缺点速度慢必须在一定时间完成处理操作,同其他Android四大组件一样,都不能执行耗时操作;</strong><br>
<strong>ContentProvider:暴露app的数据访问接口，让其他应该访问app数据.同时也能通过ContentProvider来访问第三方的一些app数据(如通讯录,日历等暴露接口的应用);</strong><br>
<strong>Intent:Intent是最高层级的封装，实质是封装了对Binder的使用，当然Intent也常常在同一进程中调用，只是把两种方式封装在一起了.</strong><br>
<img src="https://images2018.cnblogs.com/blog/612293/201807/612293-20180721125726338-2042877965.jpg"></p>
<h2 id="二.-aidl简单应用.">二. AIDL简单应用.</h2>
<pre><code class="hljs vbscript">编写两个app应用程序,一个实现Aidl传递的<span class="hljs-built_in">Server</span>端,一个实现Aidl的Client端:
aidl的<span class="hljs-built_in">Server</span>端,接收Client端传过来的两个<span class="hljs-built_in">int</span>值,定义一个加法计算的逻辑规则, 并返回 两个<span class="hljs-built_in">int</span>数之和, return num1 + num2;
aidl的Client端,从界面用户输入两个<span class="hljs-built_in">int</span>数,点击绑定<span class="hljs-built_in">Server</span>端服务,点击计算,调用<span class="hljs-built_in">Server</span>端加法逻辑,将返回结果 输入到用户界面展示,两数之和.</code></pre>
<h3 id="aidl_server端">Aidl_Server端</h3>
<p><img src="https://images2018.cnblogs.com/blog/612293/201807/612293-20180721125835612-1721114769.jpg"></p>
<pre class="java"><code class="hljs"><span class="hljs-comment">// IImoocAIDL.aidl</span>
 <span class="hljs-keyword">package</span> com.example.administrator.aidl_server.service;

<p><span class="hljs-comment">// Declare any non-default types here with import statements</span></p>
<p><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IImoocAIDL</span> </span>{<br>     <span class="hljs-comment">//计算num1 + num2</span><br>        <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-keyword">int</span> num1,<span class="hljs-keyword">int</span> num2)</span></span>;<br>}</p></code></pre><p></p>
<p>编译后会生成</p>
<pre class="java"><code class="hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IImoocAIDL</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">android</span>.<span class="hljs-title">os</span>.<span class="hljs-title">IInterface</span> </span>{
    <span class="hljs-comment">/**
     * Local-side IPC implementation stub class.
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Stub</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">android</span>.<span class="hljs-title">os</span>.<span class="hljs-title">Binder</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">com</span>.<span class="hljs-title">example</span>.<span class="hljs-title">administrator</span>.<span class="hljs-title">aidl_server</span>.<span class="hljs-title">service</span>.<span class="hljs-title">IImoocAIDL</span> </span>{
            ...
            <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Proxy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">com</span>.<span class="hljs-title">example</span>.<span class="hljs-title">administrator</span>.<span class="hljs-title">aidl_server</span>.<span class="hljs-title">service</span>.<span class="hljs-title">IImoocAIDL</span> </span>{
            <span class="hljs-keyword">private</span> android.os.IBinder mRemote;

<pre><code>        Proxy(android.os.IBinder remote) {
            mRemote = remote;
        }

        &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;
        &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; android.os.&lt;span class=&quot;hljs-function&quot;&gt;IBinder &lt;span class=&quot;hljs-title&quot;&gt;asBinder&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;{
            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; mRemote;
        }

        &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; java.lang.&lt;span class=&quot;hljs-function&quot;&gt;String &lt;span class=&quot;hljs-title&quot;&gt;getInterfaceDescriptor&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;{
            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; DESCRIPTOR;
        }

        &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;
        &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;int&lt;/span&gt; num1, &lt;span class=&quot;hljs-keyword&quot;&gt;int&lt;/span&gt; num2)&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; android.os.RemoteException &lt;/span&gt;{
            ...
        }

        ...
    }
        ...
}</code></pre><p>}</p></code></pre><p></p>
<p><img src="https://images2018.cnblogs.com/blog/612293/201807/612293-20180721125949447-88355980.jpg"></p>
<p>//om.example.administrator.aidl_server.IRemoteService</p>
<pre class="java"><code class="hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IRemoteService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Service</span> </span>{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String TAG = <span class="hljs-string">"IRemoteService"</span>;
    <span class="hljs-comment">//客户端绑定service时会执行</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> IBinder <span class="hljs-title">onBind</span><span class="hljs-params">(Intent intent)</span> </span>{
        <span class="hljs-keyword">return</span> iBinder;
    }

<pre><code>&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; IBinder iBinder = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; IImoocAIDL.Stub() {
    &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;int&lt;/span&gt; num1, &lt;span class=&quot;hljs-keyword&quot;&gt;int&lt;/span&gt; num2)&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; RemoteException &lt;/span&gt;{
        Log.e(TAG,&lt;span class=&quot;hljs-string&quot;&gt;&quot;收到了来自客户端的请求&quot;&lt;/span&gt; + num1 + &lt;span class=&quot;hljs-string&quot;&gt;&quot;+&quot;&lt;/span&gt; + num2 );
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; num1 + num2;
    }

};</code></pre><p>}</p></code></pre><p></p>
<p>//AndroidManifest.xml</p>
<pre class="xml"><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-name">application</span>
    <span class="hljs-attr">...</span>
        &lt;<span class="hljs-attr">service</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">".IRemoteService"</span>
            <span class="hljs-attr">android:process</span>=<span class="hljs-string">":remote"</span>
            <span class="hljs-attr">android:exported</span>=<span class="hljs-string">"true"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">intent-filter</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">action</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"com.example.administrator.aidl_server"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">intent-filter</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">service</span>&gt;</span>
    ...
<span class="hljs-tag">&lt;/<span class="hljs-name">application</span>&gt;</span></code></pre>
<h2 id="section"></h2>
<h3 id="aidl_client端">Aidl_Client端</h3>
<p><img src="https://images2018.cnblogs.com/blog/612293/201807/612293-20180721125848817-895261162.jpg"></p>
<pre class="java"><code class="hljs">com.example.administrator.aidl_client.MainActivity
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AppCompatActivity</span> </span>{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String TAG = <span class="hljs-string">"MainActivity"</span>;
    <span class="hljs-keyword">private</span> EditText et_send_input,nub_1,nub_2;
    <span class="hljs-keyword">private</span> TextView tv_send;
    <span class="hljs-keyword">private</span> TextView tv_bind;
    <span class="hljs-keyword">private</span> IImoocAIDL iImoocAIDLService;

<pre><code>&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; ServiceConnection conn = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; ServiceConnection() {

    &lt;span class=&quot;hljs-comment&quot;&gt;//绑定服务，回调onBind()方法&lt;/span&gt;
    &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;onServiceConnected&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(ComponentName name, IBinder service)&lt;/span&gt; &lt;/span&gt;{
        iImoocAIDLService = IImoocAIDL.Stub.asInterface(service);
    }

    &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;onServiceDisconnected&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(ComponentName name)&lt;/span&gt; &lt;/span&gt;{
        iImoocAIDLService = &lt;span class=&quot;hljs-keyword&quot;&gt;null&lt;/span&gt;;
    }
};


&lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;
&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;onCreate&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Bundle savedInstanceState)&lt;/span&gt; &lt;/span&gt;{
    &lt;span class=&quot;hljs-keyword&quot;&gt;super&lt;/span&gt;.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    bindService();

    et_send_input = findViewById(R.id.et_send_input);
    nub_1 = findViewById(R.id.nub_1);
    nub_2 = findViewById(R.id.nub_2);
    tv_send = findViewById(R.id.tv_send);
    tv_bind = findViewById(R.id.tv_bind);

    tv_send.setOnClickListener(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; View.OnClickListener() {
        &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;
        &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(View view)&lt;/span&gt; &lt;/span&gt;{
            &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {
                &lt;span class=&quot;hljs-keyword&quot;&gt;int&lt;/span&gt; nub1 = Integer.parseInt(nub_1.getText().toString().trim());
                &lt;span class=&quot;hljs-keyword&quot;&gt;int&lt;/span&gt; nub2 = Integer.parseInt(nub_2.getText().toString().trim());

                &lt;span class=&quot;hljs-keyword&quot;&gt;int&lt;/span&gt; result = iImoocAIDLService.add(nub1,nub2);
                et_send_input.setText(result+&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;);
            }&lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (Exception e){
                e.printStackTrace();
            }

        }
    });

    tv_bind.setOnClickListener(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; View.OnClickListener() {
        &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;
        &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(View view)&lt;/span&gt; &lt;/span&gt;{
            bindService();
            Log.e(TAG,&lt;span class=&quot;hljs-string&quot;&gt;&quot;bindService&quot;&lt;/span&gt;+iImoocAIDLService);
        }
    });
}

&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;bindService&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;{
    Intent intent = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; Intent();
    &lt;span class=&quot;hljs-comment&quot;&gt;//绑定服务端的service&lt;/span&gt;
    intent.setAction(&lt;span class=&quot;hljs-string&quot;&gt;&quot;com.example.administrator.aidl_server.IRemoteService&quot;&lt;/span&gt;);
    &lt;span class=&quot;hljs-comment&quot;&gt;//新版本（5.0后）必须显式intent启动 绑定服务&lt;/span&gt;
    intent.setComponent(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; ComponentName(&lt;span class=&quot;hljs-string&quot;&gt;&quot;com.example.administrator.aidl_server&quot;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&quot;com.example.administrator.aidl_server.IRemoteService&quot;&lt;/span&gt;));
    &lt;span class=&quot;hljs-comment&quot;&gt;//绑定的时候服务端自动创建&lt;/span&gt;
    bindService(intent,conn, Context.BIND_AUTO_CREATE);
}

&lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;
&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;onDestroy&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;{
    &lt;span class=&quot;hljs-keyword&quot;&gt;super&lt;/span&gt;.onDestroy();
    unbindService(conn);
}</code></pre><p>}</p></code></pre><p></p>
<p>layout/activity_main.xml</p>
<pre class="xml"><code class="hljs"><span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span><span class="hljs-meta">?&gt;</span></span>
<span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>&gt;</span>

<pre><code>&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;LinearLayout&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;android:gravity&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;center&quot;&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;android:layout_width&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;match_parent&quot;&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;android:layout_height&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;EditText&lt;/span&gt;
        &lt;span class=&quot;hljs-attr&quot;&gt;android:id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;@+id/nub_1&quot;&lt;/span&gt;
        &lt;span class=&quot;hljs-attr&quot;&gt;android:layout_width&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;
        &lt;span class=&quot;hljs-attr&quot;&gt;android:layout_height&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;
        &lt;span class=&quot;hljs-attr&quot;&gt;android:inputType&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;number&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;TextView&lt;/span&gt;
        &lt;span class=&quot;hljs-attr&quot;&gt;android:layout_width&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;
        &lt;span class=&quot;hljs-attr&quot;&gt;android:layout_height&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;
        &lt;span class=&quot;hljs-attr&quot;&gt;android:text&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;+&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;EditText&lt;/span&gt;
        &lt;span class=&quot;hljs-attr&quot;&gt;android:id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;@+id/nub_2&quot;&lt;/span&gt;
        &lt;span class=&quot;hljs-attr&quot;&gt;android:layout_width&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;
        &lt;span class=&quot;hljs-attr&quot;&gt;android:layout_height&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;
        &lt;span class=&quot;hljs-attr&quot;&gt;android:inputType&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;number&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;TextView&lt;/span&gt;
        &lt;span class=&quot;hljs-attr&quot;&gt;android:layout_width&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;
        &lt;span class=&quot;hljs-attr&quot;&gt;android:layout_height&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;
        &lt;span class=&quot;hljs-attr&quot;&gt;android:text&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;=&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;EditText&lt;/span&gt;
        &lt;span class=&quot;hljs-attr&quot;&gt;android:id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;@+id/et_send_input&quot;&lt;/span&gt;
        &lt;span class=&quot;hljs-attr&quot;&gt;android:layout_width&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;
        &lt;span class=&quot;hljs-attr&quot;&gt;android:layout_height&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;
        &lt;span class=&quot;hljs-attr&quot;&gt;android:inputType&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;number&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;LinearLayout&lt;/span&gt;&amp;gt;&lt;/span&gt;

&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;TextView&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;android:id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;@+id/tv_bind&quot;&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;android:layout_width&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;200dp&quot;&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;android:layout_height&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;55dp&quot;&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;android:layout_gravity&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;center&quot;&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;android:layout_marginBottom&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;15dp&quot;&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;android:background&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;@color/colorAccent&quot;&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;android:gravity&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;center&quot;&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;android:text&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;bind&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;

&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;TextView&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;android:id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;@+id/tv_send&quot;&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;android:layout_width&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;200dp&quot;&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;android:layout_height&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;55dp&quot;&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;android:layout_gravity&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;center&quot;&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;android:background&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;@color/colorAccent&quot;&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;android:gravity&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;center&quot;&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;android:text&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;计算&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;</code></pre><p><span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span></p></code></pre><p></p>
<p><img src="https://images2018.cnblogs.com/blog/612293/201807/612293-20180721125924545-1098549099.jpg"></p>
<p><img src="https://images2018.cnblogs.com/blog/612293/201807/612293-20180721130234841-1703766935.jpg"></p>
<h2 id="三.注意事项">三.注意事项</h2>
<p>如果运行中报错:</p>
<h4 id="aidl-method-threw-java.lang.securityexception-exception.">aidl Method threw 'java.lang.SecurityException' exception.</h4>
<p>需要 确保客户端的aidl文件包名要与服务端的包名一样.也就是本项目中的IImoocAIDL.aidl文件包名一致.</p>
<hr>
<p>[1] 参考资料: https://blog.csdn.net/jinxinliu1/article/details/70174591</p>
</div>
            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2018/07/19/Android四大组件-五-第五大组件Fragment使用/">
            <div class="nexmoe-post-cover mdui-ripple"> 
                
                    <img src="https://i.loli.net/2019/01/13/5c3aec85a4343.jpg" alt="Android 四大组件 (五) 第五大组件 - Fragment 使用">
                
                <h1>Android 四大组件 (五) 第五大组件 - Fragment 使用</h1>
            </div>
        </a>
        <div class="nexmoe-post-meta">
            <a><i class="nexmoefont icon-calendar-fill"></i>2018年07月19日</a>
            <a><i class="nexmoefont icon-areachart"></i>1.9k 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 9 分钟</a>
            
                <a class="nexmoefont icon-appstore-fill -link" href="/categories/Android/">Android</a><a class="nexmoefont icon-appstore-fill -link" href="/categories/Android/知识点/">知识点</a>
            
            
                <a class="nexmoefont icon-tag-fill -link" href="/tags/Android/">Android</a>
            
        </div>
        <article>
            
            <p><a href="https://www.cnblogs.com/bugzone/p/fragment.html" target="_blank" rel="noopener">点击查看原文</a></p>
<div id="cnblogs_post_body" class="blogpost-body ">
    <p>&nbsp; &nbsp; Fragment 的存在必须依附于 Activity，并且与 Activity 一样，拥有自己的生命周期，同时处理用户的交互动作。同一个 Activity 可以有一个或多个 Fragment 作为界面内容，并且可以动态添加、删除 Fragment，灵活控制 UI 内容，也可以用来解决部分屏幕适配问题。</p>
<p>&nbsp; &nbsp; 另外，support v4 包中也提供了 Fragment，兼容 Android 3.0 之前的系统（当然，现在 3.0 之前的系统在市场上已经很少见了，可以不予考虑），使用兼容包需要注意两点：</p>
<p>&nbsp; &nbsp; FragmentActivity是为了兼容4.0以下版本的Fragment使用的。所以如果想兼容4.0以下Android版本使用Fragment的话，框架Activity需要继承FragmentActivity，该类在android.support.v4.app.FragmentActivity里的。它提供了操作fragment的一些方法，其功能跟4.0及以后的版本的Activity的功能一样。</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1.Activity 必须继承自 FragmentActivity；<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2.使用 getSupportFragmentManager() 方法获取 FragmentManager 对象；</p>
<p>&nbsp;</p>
<h2>Fragment 生命周期介绍:</h2>
<p>　　onAttach(Context context):当Fragment和Activity发生关联时使用,在Fragment于窗口关联后立刻调用。从该方法开始，就可以通过Fragment.getActivity方法获取与Fragment关联的窗口对象，但因为Fragment的控件未初始化，所以不能够操作控件。</p>
<p>    　　onCreate(Bundle savedInstanceState)在调用完onAttach执行完之后立刻调用onCreate方法，可以在Bundle对象中获取一些在Activity中传过来的数据。通常会在该方法中读取保存的状态，获取或初始化一些数据。在该方法中不要进行耗时操作，不然窗口不会显示。</p>
<p>    　　onCreateView(LayoutInflater, ViewGroup, Bundle):创建该Fragment的视图,该方法是Fragment很重要的一个生命周期方法，因为会在该方法中创建在Fragment显示的View，其中inflater是用来装载布局文件的，container是&lt;fragment&gt;标签的父标签对应对象，　　savedInstanceState参数可以获取Fragment保存的状态，如果未保存那么就为null。</p>
<p>    　　onViewCreated(View view,Bundle savedInstanceState) Android在创建完Fragment中的View对象之后，会立刻回调该方法。其种view参数就是onCreateView中返回的view，而bundle对象用于一般用途。</p>
<p>    　　onActivityCreate(Bundle):当Activity的onCreate方法返回时调用,在Activity的onCreate方法执行完之后，Android系统会立刻调用该方法，表示窗口已经初始化完成，从这一个时候开始，就可以在Fragment中使用getActivity().findViewById(Id);来操控Activity中的view了。</p>
<p>    　　onStart()&nbsp;这个没啥可讲的，但有一个细节需要知道，当系统调用该方法的时候，fragment已经显示在ui上，但还不能进行互动，因为onResume方法还没执行完。</p>
<p><em id="__mceDel">    　　onResume()&nbsp;</em>该方法为fragment从创建到显示Android系统调用的最后一个生命周期方法，调用完该方法时候，fragment就可以与用户互动了。</p>
<p>    　　onPause() fragment由活跃状态变成非活跃状态执行的第一个回调方法，通常可以在这个方法中保存一些需要临时暂停的工作。如保存音乐播放进度，然后在onResume中恢复音乐播放进度。</p>
<p>    　　onStop() 当onStop返回的时候，fragment将从屏幕上消失。</p>
<p>    　　onDestoryView() 与onCreateView相对应，当该Fragment的视图被移除时调用, 该方法的调用意味着在 onCreateView 中创建的视图都将被移除。</p>
<p>    　　onDestroy() Android在Fragment不再使用时会调用该方法，要注意的是~这时Fragment还和Activity藕断丝连！并且可以获得Fragment对象，但无法对获得的Fragment进行任何操作。</p>
<p>    　　onDetach():与onAttach相对应，当Fragment与Activity关联被取消时调用.为Fragment生命周期中的最后一个方法，当该方法执行完后，Fragment与Activity不再有关联<br>    <br>    　　　　来自:https://blog.csdn.net/osle123/article/details/52756424</p>
<h2>Fragment 与 Activity 生命周期交互:</h2>
<p>一张图了解下:</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<img src="https://images2018.cnblogs.com/blog/612293/201807/612293-20180719091746040-653406302.png" alt></p>
<p>执行代码过程了解下:</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码" target="_blank" rel="noopener"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #800080;">1</span>. -- fragmentTransaction.addToBackStack(<span style="color: #800000;">"</span><span style="color: #800000;">blank</span><span style="color: #800000;">"</span>);<span style="color: #008000;">//</span><span style="color: #008000;">加入回退栈  按两次返回按键</span>

<p><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">15</span>:<span style="color: #800080;">50.912</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/? E/<span style="color: #000000;">MainActivity: onCreate<br></span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">15</span>:<span style="color: #800080;">50.914</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/? E/<span style="color: #000000;">BlankFragment: onAttach<br></span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">15</span>:<span style="color: #800080;">50.914</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/? E/<span style="color: #000000;">BlankFragment: onCreate<br></span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">15</span>:<span style="color: #800080;">50.914</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/? E/<span style="color: #000000;">BlankFragment: onCreateView<br></span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">15</span>:<span style="color: #800080;">50.918</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/? E/<span style="color: #000000;">BlankFragment: onActivityCreated<br></span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">15</span>:<span style="color: #800080;">50.918</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/? E/<span style="color: #000000;">BlankFragment: onStart<br></span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">15</span>:<span style="color: #800080;">50.918</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/? E/<span style="color: #000000;">MainActivity: onStart<br></span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">15</span>:<span style="color: #800080;">50.921</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/? E/<span style="color: #000000;">MainActivity: onResume<br></span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">15</span>:<span style="color: #800080;">50.921</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/? E/<span style="color: #000000;">BlankFragment: onResume<br></span><span style="color: #008000;">//</span><span style="color: #008000;">按返回键</span><br><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">16</span>:<span style="color: #800080;">39.838</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/com.example.administrator.testapplication E/<span style="color: #000000;">BlankFragment: onPause<br></span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">16</span>:<span style="color: #800080;">39.838</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/com.example.administrator.testapplication E/<span style="color: #000000;">BlankFragment: onCreate<br></span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">16</span>:<span style="color: #800080;">39.839</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/com.example.administrator.testapplication E/<span style="color: #000000;">BlankFragment: onDestroyView<br></span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">16</span>:<span style="color: #800080;">39.842</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/com.example.administrator.testapplication E/<span style="color: #000000;">BlankFragment: onDestroy<br></span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">16</span>:<span style="color: #800080;">39.842</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/com.example.administrator.testapplication E/<span style="color: #000000;">BlankFragment: onDetach<br></span><span style="color: #008000;">//</span><span style="color: #008000;">按返回键</span><br><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">16</span>:<span style="color: #800080;">42.771</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/com.example.administrator.testapplication E/<span style="color: #000000;">MainActivity: onPause<br></span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">16</span>:<span style="color: #800080;">43.157</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/com.example.administrator.testapplication E/<span style="color: #000000;">MainActivity: onStop<br></span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">16</span>:<span style="color: #800080;">43.158</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/com.example.administrator.testapplication E/MainActivity: onDestroy</p></pre><p></p>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码" target="_blank" rel="noopener"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></span></div></div>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码" target="_blank" rel="noopener"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #800080;">2</span>. <span style="color: #008000;">//</span><span style="color: #008000;">---------------------------------------------------------------------------------</span><span style="color: #008000;">//</span>
<span style="color: #008000;">//</span><span style="color: #008000;">按物理home键</span>
<span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">06.215</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/com.example.administrator.testapplication E/<span style="color: #000000;">MainActivity: onCreate
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">06.216</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/com.example.administrator.testapplication E/<span style="color: #000000;">BlankFragment: onAttach
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">06.216</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/com.example.administrator.testapplication E/<span style="color: #000000;">BlankFragment: onCreate
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">06.217</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/com.example.administrator.testapplication E/<span style="color: #000000;">BlankFragment: onCreateView
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">06.220</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/com.example.administrator.testapplication E/<span style="color: #000000;">BlankFragment: onActivityCreated
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">06.221</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/com.example.administrator.testapplication E/<span style="color: #000000;">BlankFragment: onStart
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">06.221</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/com.example.administrator.testapplication E/<span style="color: #000000;">MainActivity: onStart
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">06.223</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/com.example.administrator.testapplication E/<span style="color: #000000;">MainActivity: onResume
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">06.223</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/com.example.administrator.testapplication E/<span style="color: #000000;">BlankFragment: onResume
</span><span style="color: #008000;">//</span><span style="color: #008000;">按home键</span>
<span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">10.213</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/com.example.administrator.testapplication E/<span style="color: #000000;">BlankFragment: onPause
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">10.213</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/com.example.administrator.testapplication E/<span style="color: #000000;">MainActivity: onPause
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">10.538</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/com.example.administrator.testapplication E/<span style="color: #000000;">MainActivity: onSaveInstanceState
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">10.540</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/com.example.administrator.testapplication E/<span style="color: #000000;">BlankFragment: onCreate
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">10.540</span> <span style="color: #800080;">17903</span>-<span style="color: #800080;">17903</span>/com.example.administrator.testapplication E/MainActivity: onStop</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码" target="_blank" rel="noopener"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></span></div></div>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码" target="_blank" rel="noopener"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #800080;">3</span>. <span style="color: #008000;">//</span><span style="color: #008000;">fragmentTransaction.addToBackStack("blank"); 注释该行代码运行
</span><span style="color: #008000;">//</span><span style="color: #008000;">-----------------------------------------------------------------------------</span><span style="color: #008000;">//
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">21</span>:<span style="color: #800080;">12.098</span> <span style="color: #800080;">18226</span>-<span style="color: #800080;">18226</span>/com.example.administrator.testapplication E/<span style="color: #000000;">MainActivity: onCreate
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">21</span>:<span style="color: #800080;">12.100</span> <span style="color: #800080;">18226</span>-<span style="color: #800080;">18226</span>/com.example.administrator.testapplication E/<span style="color: #000000;">BlankFragment: onAttach
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">21</span>:<span style="color: #800080;">12.100</span> <span style="color: #800080;">18226</span>-<span style="color: #800080;">18226</span>/com.example.administrator.testapplication E/<span style="color: #000000;">BlankFragment: onCreate
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">21</span>:<span style="color: #800080;">12.101</span> <span style="color: #800080;">18226</span>-<span style="color: #800080;">18226</span>/com.example.administrator.testapplication E/<span style="color: #000000;">BlankFragment: onCreateView
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">21</span>:<span style="color: #800080;">12.105</span> <span style="color: #800080;">18226</span>-<span style="color: #800080;">18226</span>/com.example.administrator.testapplication E/<span style="color: #000000;">BlankFragment: onActivityCreated
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">21</span>:<span style="color: #800080;">12.105</span> <span style="color: #800080;">18226</span>-<span style="color: #800080;">18226</span>/com.example.administrator.testapplication E/<span style="color: #000000;">BlankFragment: onStart
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">21</span>:<span style="color: #800080;">12.105</span> <span style="color: #800080;">18226</span>-<span style="color: #800080;">18226</span>/com.example.administrator.testapplication E/<span style="color: #000000;">MainActivity: onStart
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">21</span>:<span style="color: #800080;">12.109</span> <span style="color: #800080;">18226</span>-<span style="color: #800080;">18226</span>/com.example.administrator.testapplication E/<span style="color: #000000;">MainActivity: onResume
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">21</span>:<span style="color: #800080;">12.109</span> <span style="color: #800080;">18226</span>-<span style="color: #800080;">18226</span>/com.example.administrator.testapplication E/<span style="color: #000000;">BlankFragment: onResume
</span><span style="color: #008000;">//</span><span style="color: #008000;">按返回键</span>
<span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">21</span>:<span style="color: #800080;">16.642</span> <span style="color: #800080;">18226</span>-<span style="color: #800080;">18226</span>/com.example.administrator.testapplication E/<span style="color: #000000;">BlankFragment: onPause
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">21</span>:<span style="color: #800080;">16.642</span> <span style="color: #800080;">18226</span>-<span style="color: #800080;">18226</span>/com.example.administrator.testapplication E/<span style="color: #000000;">MainActivity: onPause
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">21</span>:<span style="color: #800080;">17.020</span> <span style="color: #800080;">18226</span>-<span style="color: #800080;">18226</span>/com.example.administrator.testapplication E/<span style="color: #000000;">BlankFragment: onCreate
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">21</span>:<span style="color: #800080;">17.020</span> <span style="color: #800080;">18226</span>-<span style="color: #800080;">18226</span>/com.example.administrator.testapplication E/<span style="color: #000000;">MainActivity: onStop
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">21</span>:<span style="color: #800080;">17.022</span> <span style="color: #800080;">18226</span>-<span style="color: #800080;">18226</span>/com.example.administrator.testapplication E/<span style="color: #000000;">BlankFragment: onDestroyView
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">21</span>:<span style="color: #800080;">17.023</span> <span style="color: #800080;">18226</span>-<span style="color: #800080;">18226</span>/com.example.administrator.testapplication E/<span style="color: #000000;">BlankFragment: onDestroy
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">21</span>:<span style="color: #800080;">17.024</span> <span style="color: #800080;">18226</span>-<span style="color: #800080;">18226</span>/com.example.administrator.testapplication E/<span style="color: #000000;">BlankFragment: onDetach
</span><span style="color: #800080;">07</span>-<span style="color: #800080;">18</span> <span style="color: #800080;">20</span>:<span style="color: #800080;">21</span>:<span style="color: #800080;">17.024</span> <span style="color: #800080;">18226</span>-<span style="color: #800080;">18226</span>/com.example.administrator.testapplication E/MainActivity: onDestroy</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码" target="_blank" rel="noopener"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></span></div></div>
<p>&nbsp;</p>
<p>相关调用代码:</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码" target="_blank" rel="noopener"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></span></div>
<pre>　　　　BlankFragment fragment = <span style="color: #0000ff;">new</span><span style="color: #000000;"> BlankFragment();

<pre><code>android.support.v4.app.FragmentManager fragmentManager;
android.support.v4.app.FragmentTransaction fragmentTransaction;

fragmentManager &lt;/span&gt;=&lt;span style=&quot;color: #000000;&quot;&gt; getSupportFragmentManager();
fragmentTransaction &lt;/span&gt;=&lt;span style=&quot;color: #000000;&quot;&gt; getSupportFragmentManager().beginTransaction();
fragmentTransaction.add(R.id.ll_fragment,fragment,&lt;/span&gt;&lt;span style=&quot;color: #800000;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #800000;&quot;&gt;blank&lt;/span&gt;&lt;span style=&quot;color: #800000;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;);
fragmentTransaction.addToBackStack(&lt;/span&gt;&lt;span style=&quot;color: #800000;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #800000;&quot;&gt;blank&lt;/span&gt;&lt;span style=&quot;color: #800000;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;);
fragmentTransaction.commit();&lt;/span&gt;&lt;/pre&gt;</code></pre><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码" target="_blank" rel="noopener"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></span></div></span></pre></div>
<p>&nbsp;</p>
</div>
            
        </article>
    </div>
    
</section>

    <nav class="nexmoe-page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/categories/Android/知识点/page/2/">2</a><a class="extend next" rel="next" href="/categories/Android/知识点/page/2/"><i class="nexmoefont icon-right"></i></a>
    </nav>
  
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/mdui@0.4.3/dist/js/mdui.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
 
    <script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>


 
    <script src="https://cdn.jsdelivr.net/npm/smoothscroll-for-websites@1.4.9/SmoothScroll.min.js"></script>


<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.8/build/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script src="/js/app.js?v=1571545567635"></script>
<script src="https://cdn.jsdelivr.net/npm/lazysizes@5.1.0/lazysizes.min.js"></script>


    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/xtaodada/xtaodada.github.io@0.0.2/copy.js"></script>



  





    <!-- baidu Analytics -->
<script>
    var _hmt = _hmt || [];
    (function() {var hm = document.createElement('script');
    hm.src = 'https://hm.baidu.com/hm.js?3771b2566860fea0de20c35742671f53#&lt;ID&gt;';
    var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

</body>

</html>
